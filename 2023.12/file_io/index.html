
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Efficient parallel data processing requires data I/O to be parallelized
effectively as well. Bodo provides parallel file I/O for many different
formats such as Parquet, CSV, JSON, Numpy
binaries, HDF5 and SQL databases. This diagram
demonstrates how chunks of data are partitioned among parallel execution
engines by Bodo.">
      
      
        <meta name="author" content="Bodo Team">
      
      
        <link rel="canonical" href="https://docs.bodo.ai/2023.12/file_io/">
      
      
        <link rel="prev" href="../bodo_parallelism/not_supported/">
      
      
        <link rel="next" href="../objmode/">
      
      
        
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.0.11+insiders-4.30.0">
    
    
      
        <title>Scalable Data I/O - Bodo Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.b6d2c4d8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Archivo:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Archivo";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/bodo.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-W019JWTQ1N"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-W019JWTQ1N",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-W019JWTQ1N",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="bodo-light" data-md-color-accent="bodo-green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#file_io" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../.."> 
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Bodo Developer Documentation" class="md-header__button md-logo" aria-label="Bodo Developer Documentation" data-md-component="logo">
      
  <img src="../assets/bodo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Bodo Developer Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Scalable Data I/O
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="bodo-light" data-md-color-accent="bodo-green"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="default" data-md-color-primary="bodo-light" data-md-color-accent="bodo-green"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
          
        
      </form>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  About Bodo

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../quick_start_platform/" class="md-tabs__link">
        
  
  Quick Start

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../installation_and_setup/" class="md-tabs__link">
          
  
    
  
  Installation and Setup

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item">
        <a href="../dev_guide/" class="md-tabs__link md-tabs__link--active">
          
  
  Programming with Bodo

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../integrating_bodo/platform_sdk/" class="md-tabs__link">
          
  
  Bodo in your Pipeline

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../api_docs/" class="md-tabs__link">
          
  
    
  
  API Docs

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../performance/performance/" class="md-tabs__link">
          
  
  Performance and Diagnostics

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../help_and_reference/eula/" class="md-tabs__link">
          
  
  Help and Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Bodo Developer Documentation" class="md-nav__button md-logo" aria-label="Bodo Developer Documentation" data-md-component="logo">
      
  <img src="../assets/bodo-logo.png" alt="logo">

    </a>
    Bodo Developer Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    About Bodo
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../quick_start_platform/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../installation_and_setup/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Installation and Setup
  

    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Installation and Setup
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Bodo Platform
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Bodo Platform
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/bodo_platform/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Bodo Platform Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/bodo_platform_aws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Bodo Platform on AWS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/bodo_platform_azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Bodo Platform on Azure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/platform_sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Bodo Platform SDK
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Bodo On-Prem
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Bodo On-Prem
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Installing Bodo Community Edition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/enterprise/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Configuring Bodo Enterprise Edition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/ipyparallel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Interactive Bodo Cluster Setup using IPyParallel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/recommended_mpi_settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Recommended MPI Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/recommended_cluster_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Recommended Cluster Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Programming with Bodo
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Programming with Bodo
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Developer's Quick Start Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Understanding Parallelism with Bodo
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Understanding Parallelism with Bodo
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../bodo_parallelism/bodo_parallelism_basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Basics of Bodo Parallelism
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../bodo_parallelism/advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Advanced Parallelism Topics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../bodo_parallelism/typing_considerations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Typing Considerations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../bodo_parallelism/not_supported/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Unsupported Programs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    
  
    Scalable Data I/O
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    
  
    Scalable Data I/O
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Scalable Data I/O">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Scalable Data I/O
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#io_workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Workflow
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-data-formats" class="md-nav__link">
    <span class="md-ellipsis">
      
        Supported Data Formats
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Supported Data Formats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parquet-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parquet
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parquet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filter-pushdown-and-column-pruning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filter Pushdown and Column Pruning
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exploring-large-data-without-full-read" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exploring Large Data Without Full Read
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csv-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        CSV
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        JSON
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sql-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        SQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filter-pushdown-and-column-pruning_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filter Pushdown and Column Pruning
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deltalake-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        Delta Lake
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iceberg-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        Iceberg
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#numpy-binary-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        Numpy binaries
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hdf5" class="md-nav__link">
    <span class="md-ellipsis">
      
        HDF5
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#File" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Systems
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#S3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Amazon S3
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#GCS" class="md-nav__link">
    <span class="md-ellipsis">
      
        Google Cloud Storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#HDFS" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hadoop Distributed File System (HDFS) and Azure Data Lake Storage (ADLS) Gen2
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hadoop Distributed File System (HDFS) and Azure Data Lake Storage (ADLS) Gen2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-hdfsadls-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting up HDFS/ADLS Credentials
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interleave-adls-snowflake-write" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interleaving HDFS/ADLS I/O with Snowflake Write
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#db" class="md-nav__link">
    <span class="md-ellipsis">
      
        Databases
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snowflake-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        Snowflake
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Snowflake">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-from-snowflake" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reading from Snowflake
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reading from Snowflake">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snowflake-write" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writing to Snowflake
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing to Snowflake">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#snowflake-write-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-snowflake-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Required Snowflake Permissions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Required Snowflake Permissions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#snowflake-write-perms-create" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating a new table
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replacing-an-existing-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Replacing an existing table
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appending-to-an-existing-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appending to an existing table
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-your-roles-permissions-in-snowflake" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verifying your role's permissions in Snowflake
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Configuration Options
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mysql" class="md-nav__link">
    <span class="md-ellipsis">
      
        MySQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MySQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#oracle-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Oracle Database
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Oracle Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        PostgreSQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-constant-filepaths" class="md-nav__link">
    <span class="md-ellipsis">
      
        Specifying I/O Data Types Manually
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../objmode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Using Regular Python inside Bodo (Object Mode)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Bodo in your Pipeline
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Bodo in your Pipeline
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../integrating_bodo/platform_sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Bodo Platform SDK
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../integrating_bodo/database_catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Native SQL with Catalogs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../integrating_bodo/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Deploying Bodo with Kubernetes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../integrating_bodo/bodo-jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Bodo Batch Jobs
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--new" title="Recently added">
    </span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../api_docs/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    API Docs
  

    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_6">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Docs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/bodo_parallel_apis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Bodo Parallel APIs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../api_docs/pandas/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Pandas
  

    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_6_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Pandas
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/general/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    General Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/dataframe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    DataFrame
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/groupby/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Groupby
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/series/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Series
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/window/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Window
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/dateoffsets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    DateOffsets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Input/Output
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/indexapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Index Objects
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/timedelta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    TimeDelta
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/timestamp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Timestamp
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/numpy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Numpy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/udfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    User Defined Functions (UDFs)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../api_docs/ml/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Machine Learning
  

    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_6_6">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Machine Learning
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_6_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../api_docs/ml/sklearn/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Scikit Learn
  

    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_6_6_2">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Scikit Learn
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    sklearn.cluster
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/ensemble/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    sklearn.ensemble
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/feature_extraction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    sklearn.feature_extraction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/linear_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    sklearn.linear_model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    sklearn.metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/model_selection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    sklearn.model_selection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/naive_bayes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    sklearn.naive_bayes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/preprocessing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    sklearn.preprocessing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/svm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    sklearn.svm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_7" >
        
          <label class="md-nav__link" for="__nav_6_7" id="__nav_6_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    BodoSQL
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    BodoSQL
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/BodoSQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/bodosqlerrors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Errors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Performance and Diagnostics
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Performance and Diagnostics
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../performance/performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Measuring Performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../performance/caching/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Caching
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../performance/inlining/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Inlining
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../diagnostics_and_troubleshooting/Bodoerrors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Bodo Errors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../diagnostics_and_troubleshooting/compilation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Compilation Tips
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../diagnostics_and_troubleshooting/verbose_mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Verbose Mode
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Help and Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Help and Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../help_and_reference/eula/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    End User License Agreement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../help_and_reference/releases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Release Notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Scalable Data I/O">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Scalable Data I/O
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#io_workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        I/O Workflow
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-data-formats" class="md-nav__link">
    <span class="md-ellipsis">
      
        Supported Data Formats
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Supported Data Formats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parquet-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parquet
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parquet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filter-pushdown-and-column-pruning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filter Pushdown and Column Pruning
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exploring-large-data-without-full-read" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exploring Large Data Without Full Read
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csv-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        CSV
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        JSON
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sql-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        SQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filter-pushdown-and-column-pruning_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filter Pushdown and Column Pruning
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deltalake-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        Delta Lake
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iceberg-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        Iceberg
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#numpy-binary-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        Numpy binaries
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hdf5" class="md-nav__link">
    <span class="md-ellipsis">
      
        HDF5
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#File" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Systems
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#S3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Amazon S3
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#GCS" class="md-nav__link">
    <span class="md-ellipsis">
      
        Google Cloud Storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#HDFS" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hadoop Distributed File System (HDFS) and Azure Data Lake Storage (ADLS) Gen2
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hadoop Distributed File System (HDFS) and Azure Data Lake Storage (ADLS) Gen2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-hdfsadls-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting up HDFS/ADLS Credentials
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interleave-adls-snowflake-write" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interleaving HDFS/ADLS I/O with Snowflake Write
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#db" class="md-nav__link">
    <span class="md-ellipsis">
      
        Databases
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snowflake-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        Snowflake
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Snowflake">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-from-snowflake" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reading from Snowflake
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reading from Snowflake">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snowflake-write" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writing to Snowflake
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing to Snowflake">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#snowflake-write-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-snowflake-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Required Snowflake Permissions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Required Snowflake Permissions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#snowflake-write-perms-create" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating a new table
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replacing-an-existing-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Replacing an existing table
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appending-to-an-existing-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appending to an existing table
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-your-roles-permissions-in-snowflake" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verifying your role's permissions in Snowflake
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Configuration Options
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mysql" class="md-nav__link">
    <span class="md-ellipsis">
      
        MySQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MySQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#oracle-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Oracle Database
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Oracle Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        PostgreSQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-constant-filepaths" class="md-nav__link">
    <span class="md-ellipsis">
      
        Specifying I/O Data Types Manually
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
        
  
    <li class="md-path__item">
      <a href=".." class="md-path__link">
        <span class="md-ellipsis">
          About Bodo
        </span>
      </a>
    </li>
  

      
      
        
  
    
    
      <li class="md-path__item">
        <a href="../dev_guide/" class="md-path__link">
          <span class="md-ellipsis">
            Programming with Bodo
          </span>
        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  
  





<h1 id="file_io">Scalable Data I/O<a class="headerlink" href="#file_io" title="Permanent link">&para;</a></h1>
<p>Efficient parallel data processing requires data I/O to be parallelized
effectively as well. Bodo provides parallel file I/O for many different
formats such as <a href="http://parquet.apache.org">Parquet</a>, CSV, JSON, Numpy
binaries, <a href="http://www.h5py.org">HDF5</a> and SQL databases. This diagram
demonstrates how chunks of data are partitioned among parallel execution
engines by Bodo.</p>
<p><br>
<img alt="Bodo reads dataset chunks in parallel" src="../img/file-read.svg#center" />
<br></p>
<p>Bodo automatically parallelizes I/O for any number of cores and cluster
size without any additional API layers.</p>
<h2 id="io_workflow">I/O Workflow<a class="headerlink" href="#io_workflow" title="Permanent link">&para;</a></h2>
<p>Make sure I/O calls for large data are inside JIT functions
to allow Bodo to parallelize I/O and divide the data across cores
automatically
(see below for supported formats and APIs).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Performing I/O in regular Python (outside JIT functions) replicates
data on all Python processes,
which can result in out-of-memory errors if the data is large.
For example, a 1 GB dataframe replicated on 1000 cores consumes
1 TB of memory.</p>
</div>
<p>Bodo looks at the schema of the input dataset during compilation time to infer
the datatype of the resulting dataframe.
This requires the dataset path to be available to the compiler. The path should be either a constant string value, an argument
to the JIT function, or a simple combination of the two.
For example, the following code passes the dataset path as an argument, allowing Bodo to infer the data type of <code>df</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;JOB_DATA_PATH&quot;</span><span class="p">]</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="n">f</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>
</code></pre></div>
<p>Concatenating arguments and constant values also works:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">data_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;JOB_DATA_ROOT&quot;</span><span class="p">]</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">root</span> <span class="o">+</span> <span class="s2">&quot;/table1.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="n">f</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span>
</code></pre></div>
<p>In the rare case that the path should be a dynamic value inside JIT functions,
the data types have to be specified manually
(see <a class="autorefs autorefs-internal" href="#non-constant-filepaths">Specifying I/O Data Types Manually</a>).
This is error-prone and should be avoided as much as possible.</p>
<h2 id="supported-data-formats">Supported Data Formats<a class="headerlink" href="#supported-data-formats" title="Permanent link">&para;</a></h2>
<p>Currently, Bodo supports I/O for <a href="http://parquet.apache.org/">Parquet</a>,
CSV, SQL, JSON, <a href="http://www.h5py.org/">HDF5</a>, and Numpy binaries
formats. It can read these formats from multiple filesystems, including
S3, HDFS and Azure Data Lake (ADLS) (see <a href="#file-systems">File Systems</a>
below for more information).
Many databases and data warehouses such as <a class="autorefs autorefs-internal" href="#snowflake-section">Snowflake</a> are supported as well.</p>
<p>Also see <a class="autorefs autorefs-internal" href="../api_docs/pandas/#pandas">supported pandas APIs</a> for supported arguments of I/O functions.</p>
<h3 id="parquet-section">Parquet<a class="headerlink" href="#parquet-section" title="Permanent link">&para;</a></h3>
<p>Parquet is a commonly used file format in analytics due to its efficient
columnar storage. Bodo supports the standard pandas API for reading
Parquet: <code>pd.read_parquet(path)</code>, where path can be a parquet file, a
directory with multiple parquet files (all are part of the same
dataframe), a glob pattern, list of files or list of glob patterns:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="k">def</span> <span class="nf">write_pq</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;s3://bucket-name/example.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="k">def</span> <span class="nf">read_pq</span><span class="p">():</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;s3://bucket-name/example.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>    <span class="k">return</span> <span class="n">df</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Bodo reads datasets in parallel using multiple cores while ensuring that the number of rows read on all cores is roughly equal.
The size and number of row groups can affect parallel read performance significantly.
Currently, reading any number of rows in Bodo requires reading at least one row-group. To read even a single row from a parquet dataset, the entire row-group containing that row (and its corresponding metadata) needs to be read first, and then the required row is extracted from it.
Therefore, for best parallel read performance, there must be sufficient row-groups to minimize the number of instances where multiple cores need to read from the same row group. This means there must be at least as many row groups as the number of cores, but ideally a lot more.
At the same time, the size of the row-groups should not be too small since this can lead to overheads.
For more details about parquet file format, refer to the <a href="https://parquet.apache.org/docs/concepts/" target="blank">format specification</a>.</p>
</div>
<p><code>to_parquet(name)</code> with distributed data writes to a folder called
<code>name</code>. Each process writes one file into the folder, but if the data is
not distributed, <code>to_parquet(name)</code> writes to a single file called
<code>name</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="k">def</span> <span class="nf">example1_pq</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;example1.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;df&quot;</span><span class="p">})</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="k">def</span> <span class="nf">example2_pq</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;example2.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>    <span class="n">example1_pq</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="n">example2_pq</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<p>Run the code above with 4 processors:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>mpiexec<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span><span class="w"> </span>python<span class="w"> </span>example_pq.py
</code></pre></div>
<p><code>example1_pq(df)</code> writes 1 single file, and <code>example2_pq(df)</code> writes a
folder containing 4 parquet files:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="go">.</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="go">├── example1.pq</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="go">├── example2.pq</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="go">│   ├── part-00.parquet</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="go">│   ├── part-01.parquet</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="go">│   ├── part-02.parquet</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="go">│   └── part-03.parquet</span>
</code></pre></div>
<p>See <a class="autorefs autorefs-internal" href="../api_docs/pandas/io/#pandas-f-in"><code>read_parquet()</code></a>, <a class="autorefs autorefs-internal" href="../api_docs/pandas/series/#serialization-io-conversion"><code>to_parquet()</code></a> for supported arguments.</p>
<h4 id="filter-pushdown-and-column-pruning">Filter Pushdown and Column Pruning<a class="headerlink" href="#filter-pushdown-and-column-pruning" title="Permanent link">&para;</a></h4>
<p><strong><em>Filter Pushdown and Column Pruning</em></strong></p>
<p>Bodo can detect filters used by the code and optimize the <code>read_parquet</code>
call by pushing the filters down to the storage layer, so that only the
rows required by the program are read.
In addition, Bodo only reads the columns that are used in the program,
and prunes the unused columns.
These optimizations can significantly speed up
I/O in many cases and can substantially reduce the program's memory footprint.</p>
<p>For example, suppose we have a large dataset with many columns that spans many years, and
we only need to read revenue data for a particular year:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">def</span> <span class="nf">query</span><span class="p">():</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;s3://my-bucket/data.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2021</span><span class="p">]</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;customer_key&quot;</span><span class="p">)[</span><span class="s2">&quot;revenue&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</code></pre></div>
<p>When compiling the above, Bodo detects the <code>df[df["year"] == 2021]</code>
filter and optimizes the <code>read_parquet</code> call so that it only reads data
for year 2021 from S3.
This requires the dataframe filtering operation to be in the same JIT function
as <code>read_parquet</code>, and the dataframe variable shouldn't be used before filtering.
Bodo also makes sure only <code>customer_key</code> and <code>revenue</code> columns are read since
other columns are not used in the programs.</p>
<p>In general, if the dataset is <em>hive-partitioned</em> and partition columns appear in
filter expressions, only the files that contain relevant data are read,
and the rest are discarded based on their path. For example, if <code>year</code>
is a partition column above and we have a dataset:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="go">.</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="go">└── data.pq/</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="go">    │   ...</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="go">    ├───year=2020/</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="go">    │   ├── part-00.parquet</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="go">    │   └── part-01.parquet</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="go">    └───year=2021/</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="go">        ├── part-02.parquet</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="go">        └── part-03.parquet</span>
</code></pre></div>
<p>Bodo will only read the files in the <code>year=2021</code> directory.</p>
<p>For non-partition columns, Bodo may discard files entirely just by
looking at their parquet metadata (depending on the filters and
statistics contained in the metadata) or filter the rows during read.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Filter pushdown is often a very important optimization
and critical for having manageable memory footprint in big data workloads.
Make sure filtering happens in the same JIT function
right after dataset read (or JIT functions for I/O are inlined, see <a class="autorefs autorefs-internal" href="../performance/inlining/#inlining">inlining</a>).</p>
</div>
<h4 id="exploring-large-data-without-full-read">Exploring Large Data Without Full Read<a class="headerlink" href="#exploring-large-data-without-full-read" title="Permanent link">&para;</a></h4>
<p><strong><em>Exploring Large Data Without Full Read</em></strong></p>
<p>Exploring large datasets often requires seeing its shape and a sample of
the data. Bodo is able to provide this information quickly without
loading the full Parquet dataset, which means there is no need for a
large cluster with a lot of memory. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">def</span> <span class="nf">head_only_read</span><span class="p">():</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;s3://my-bucket/example.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</code></pre></div>
<p>In this example, Bodo provides the shape information for the full
dataset in <code>df.shape</code>, but only loads the first few rows that are
necessary for <code>df.head()</code>.</p>
<h3 id="csv-section">CSV<a class="headerlink" href="#csv-section" title="Permanent link">&para;</a></h3>
<p>CSV is a common text format for data exchange. Bodo supports most of the
standard pandas API to read CSV files:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="k">def</span> <span class="nf">write_csv</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;s3://my-bucket/example.csv&quot;</span><span class="p">)</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="k">def</span> <span class="nf">read_csv</span><span class="p">():</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;s3://my-bucket/example.csv&quot;</span><span class="p">)</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>    <span class="k">return</span> <span class="n">df</span>
</code></pre></div>
<p>Unlike <code>read_csv</code> in regular pandas, Bodo can read a directory that
contains multiple partitioned CSV files as well. All files in the folder
must have the same number and datatype of columns. They can have
different number of rows.</p>
<p>Usage:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="k">def</span> <span class="nf">read_csv_folder</span><span class="p">():</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;s3://my-bucket/path/to/folder/foldername&quot;</span><span class="p">)</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    <span class="n">doSomething</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<p>Use <code>sep="n"</code> to read text files line by line into a single-column
dataframe (without creating separate columns, useful when text data is
unstructured or there are too many columns to read efficiently):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="k">def</span> <span class="nf">read_test</span><span class="p">():</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;example.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;str&quot;</span><span class="p">})</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>    <span class="k">return</span> <span class="n">df</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Bodo uses nullable integer types of pandas to ensure type stability (see
<a class="autorefs autorefs-internal" href="../bodo_parallelism/typing_considerations/#integer-na-issue-pandas">integer NA issue in pandas</a> for more details). Therefore, data types must be specified
explicitly for accurate performance comparisons of Bodo and pandas for
<code>read_csv</code>.</p>
</div>
<p><code>to_csv(name)</code> has different behaviors for different file systems:</p>
<ol>
<li>
<p>POSIX file systems: always writes to a single file, regardless of the number of processes and whether the data is
    distributed, but writing is still done in parallel when more than 1 processor is used:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">)})</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="k">def</span> <span class="nf">example1_csv</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;example1.csv&quot;</span><span class="p">)</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;df&quot;</span><span class="p">})</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="k">def</span> <span class="nf">example2_csv</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;example2.csv&quot;</span><span class="p">)</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>    <span class="n">example1_csv</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="n">example2_csv</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<p>Run the code above with 4 processors:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>mpiexec<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span><span class="w"> </span>python<span class="w"> </span>example_csv.py
</code></pre></div>
<p>each <code>example1_csv(df)</code> and <code>example2_csv(df)</code> writes to a single file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="go">.</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="go">├── example1.csv</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="go">├── example2.csv</span>
</code></pre></div>
</li>
<li>
<p><a class="autorefs autorefs-internal" href="#S3">S3</a> and <a class="autorefs autorefs-internal" href="#HDFS">HDFS</a>: distributed data is written to a folder called <code>name</code>.
    Each process writes one file into the folder, but if the data is not distributed,
    <code>to_csv(name)</code> writes to a single file called <code>name</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">)})</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="k">def</span> <span class="nf">example1_csv</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;s3://bucket-name/example1.csv&quot;</span><span class="p">)</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;df&quot;</span><span class="p">})</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="k">def</span> <span class="nf">example2_csv</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;s3://bucket-name/example2.csv&quot;</span><span class="p">)</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>    <span class="n">example1_csv</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="n">example2_csv</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<p>Run the code above with 4 processors:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>mpiexec<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span><span class="w"> </span>python<span class="w"> </span>example_csv.py
</code></pre></div>
<p><code>example1_csv(df)</code> writes 1 single file, and <code>example2_csv(df)</code> writes a folder containing 4 csv files:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="go">.</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="go">├── example1.csv</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="go">├── example2.csv</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="go">│   ├── part-00.csv</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="go">│   ├── part-01.csv</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="go">│   ├── part-02.csv</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="go">│   └── part-03.csv</span>
</code></pre></div>
</li>
</ol>
<p>See <a class="autorefs autorefs-internal" href="../api_docs/pandas/io/#pandas-f-in"><code>read_csv()</code></a>, <a class="autorefs autorefs-internal" href="../api_docs/pandas/series/#serialization-io-conversion"><code>to_csv()</code></a> for supported arguments.</p>
<h3 id="json-section">JSON<a class="headerlink" href="#json-section" title="Permanent link">&para;</a></h3>
<p>For JSON, the syntax is also the same as pandas.</p>
<p>Usage:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="k">def</span> <span class="nf">example_write_json</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">fname</span><span class="p">):</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="k">def</span> <span class="nf">example_read_json_lines_format</span><span class="p">():</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;example.json&quot;</span><span class="p">,</span> <span class="n">orient</span> <span class="o">=</span> <span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="n">lines</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="k">def</span> <span class="nf">example_read_json_multi_lines</span><span class="p">():</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;example_file.json&quot;</span><span class="p">,</span> <span class="n">orient</span> <span class="o">=</span> <span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="n">lines</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>        <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">})</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>The <code>dtype</code> argument is required when reading a regular multi-line JSON
    file.</li>
<li>Bodo cannot read a directory containing multiple multi-line JSON
    files</li>
<li>Bodo's default values for <code>orient</code> and <code>lines</code> are <code>records</code> and <code>False</code> respectively.</li>
</ul>
</div>
<p><code>to_json(name)</code> has different behaviors for different file systems:</p>
<ol>
<li>
<p>POSIX file systems: <code>to_json(name)</code> behavior depends on <code>orient</code> and <code>lines</code> arguments.</p>
<ol>
<li>
<p><code>DataFrame.to_json(name, orient="records", lines=True)</code>
    (i.e. writing <a href="http://jsonlines.org/" target="blank">JSON Lines text file format</a>) always writes to a single file,
    regardless of the number of processes and whether the data is distributed,
    but writing is still done in parallel when more than 1 processor is used:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">)})</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="k">def</span> <span class="nf">example1_json</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s2">&quot;example1.json&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="n">lines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;df&quot;</span><span class="p">})</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="k">def</span> <span class="nf">example2_json</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s2">&quot;example2.json&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="n">lines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>    <span class="n">example1_json</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="n">example2_jsons</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<p>Run the code above with 4 processors:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>mpiexec<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span><span class="w"> </span>python<span class="w"> </span>example_json.py
</code></pre></div>
<p>each <code>example1_json(df)</code> and <code>example2_json(df)</code> writes to a single file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="go">.</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="go">├── example1.json</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="go">├── example2.json</span>
</code></pre></div>
</li>
<li>
<p>All other combinations of values for <code>orient</code> and <code>lines</code> have the same behavior as <a class="autorefs autorefs-internal" href="#S3">S3</a> and
<a class="autorefs autorefs-internal" href="#HDFS">HDFS</a> explained below.</p>
</li>
</ol>
</li>
<li>
<p><a class="autorefs autorefs-internal" href="#S3">S3</a> and <a class="autorefs autorefs-internal" href="#HDFS">HDFS</a> : distributed data is written to a folder called <code>name</code>.
    Each process writes one file into the folder, but if the data is not distributed,
    <code>to_json(name)</code> writes to a file called <code>name</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">)})</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="k">def</span> <span class="nf">example1_json</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s2">&quot;s3://bucket-name/example1.json&quot;</span><span class="p">)</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;df&quot;</span><span class="p">})</span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="k">def</span> <span class="nf">example2_json</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s2">&quot;s3://bucket-name/example2.json&quot;</span><span class="p">)</span>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>    <span class="n">example1_json</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="n">example2_json</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<p>Run the code above with 4 processors:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>mpiexec<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span><span class="w"> </span>python<span class="w"> </span>example_json.py
</code></pre></div>
<p><code>example1_json(df)</code> writes 1 single file, and <code>example2_json(df)</code> writes a folder containing 4 json files:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="go">.</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="go">├── example1.json</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="go">├── example2.json</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="go">│   ├── part-00.json</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="go">│   ├── part-01.json</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="go">│   ├── part-02.json</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="go">│   └── part-03.json</span>
</code></pre></div>
<p>See <a class="autorefs autorefs-internal" href="../api_docs/pandas/series/#serialization-io-conversion"><code>read_json()][pandas-f-in], [</code>to_json()`</a> for supported arguments.</p>
</li>
</ol>
<h3 id="sql-section">SQL<a class="headerlink" href="#sql-section" title="Permanent link">&para;</a></h3>
<p>See <a class="autorefs autorefs-internal" href="#db">Databases</a> for the list of supported Relational Database Management Systems (RDBMS) with Bodo.</p>
<p>For SQL, the syntax is also the same as pandas. For reading:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="k">def</span> <span class="nf">example_read_sql</span><span class="p">():</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&quot;select * from employees&quot;</span><span class="p">,</span> <span class="s2">&quot;mysql+pymysql://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;/&lt;db_name&gt;&quot;</span><span class="p">)</span>
</code></pre></div>
<p>See <a class="autorefs autorefs-internal" href="../api_docs/pandas/io/#pandas-f-in"><code>read_sql()</code></a> for supported arguments.</p>
<p>For writing:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="k">def</span> <span class="nf">example_write_sql</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s2">&quot;table_name&quot;</span><span class="p">,</span> <span class="s2">&quot;mysql+pymysql://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;/&lt;db_name&gt;&quot;</span><span class="p">)</span>
</code></pre></div>
<p>See <a class="autorefs autorefs-internal" href="../api_docs/pandas/io/#pandas-f-in"><code>to_sql()</code></a> for supported arguments.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>sqlalchemy</code> must be installed in order to use <code>pandas.read_sql</code>.</p>
</div>
<h4 id="filter-pushdown-and-column-pruning_1">Filter Pushdown and Column Pruning<a class="headerlink" href="#filter-pushdown-and-column-pruning_1" title="Permanent link">&para;</a></h4>
<p><strong><em>Filter Pushdown and Column Pruning</em></strong></p>
<p>Similar to Parquet read, Bodo JIT compiler is able to
push down filters to the data source and prune unused columns automatically.
For example, this program reads data from a very large Snowflake table,
but only needs limited rows and columns:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="k">def</span> <span class="nf">filter_ex</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">int_val</span><span class="p">):</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM LINEITEM&quot;</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;l_orderkey&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">int_val</span> <span class="o">&gt;=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;l_linenumber&quot;</span><span class="p">])]</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;l_suppkey&quot;</span><span class="p">]</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="n">filter_ex</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div>
<p>Bodo optimizes the query passed to <code>read_sql</code> to push filters down and
prune unused columns. In this case, Bodo will replace <code>SELECT * FROM LINEITEM</code> with
the optimized version automatically:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="ss">&quot;L_SUPPKEY&quot;</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">LINEITEM</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">TEMP</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="k">WHERE</span><span class="w">  </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">l_orderkey</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">l_linenumber</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>
<h3 id="deltalake-section">Delta Lake<a class="headerlink" href="#deltalake-section" title="Permanent link">&para;</a></h3>
<p>Reading parquet files from Delta Lake is supported locally, from S3, and from Azure ADLS.</p>
<ul>
<li>The Delta Lake binding python packaged needs to be installed using pip:<code>pip install deltalake</code>.</li>
<li>For S3, the <code>AWS_DEFAULT_REGION</code> environment variable should be set to the region of the bucket hosting
    the Delta Lake table.</li>
<li>For ADLS, the <code>AZURE_STORAGE_ACCOUNT</code> and <code>AZURE_STORAGE_KEY</code> environment variables need to be set.</li>
</ul>
<p>Example code for reading:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="k">def</span> <span class="nf">example_read_deltalake</span><span class="p">():</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;path/to/deltalake&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Writing is currently not supported.</p>
</div>
<h3 id="iceberg-section">Iceberg<a class="headerlink" href="#iceberg-section" title="Permanent link">&para;</a></h3>
<p>Bodo's support for Iceberg Tables is under active development and currently only supports
basic read and write functionality.</p>
<p>Bodo supports reading Iceberg tables stored in a directory on HDFS, either locally or from S3,
through Pandas' <code>read_sql_table</code> API.</p>
<ul>
<li>Bodo's Iceberg Connector python package needs to be installed using conda:
    <code>conda install bodo-iceberg-connector -c bodo.ai -c conda-forge</code>.</li>
<li>For tables on S3, the credentials should be set either using environment variables,
    or AWS configuration in <code>~/.aws</code> or using an instance profile on the EC2 instance.</li>
</ul>
<p>Iceberg connection strings vary by catalog, but in general are of the form <code>iceberg&lt;+conn&gt;://&lt;path&gt;&lt;?params&gt;</code> where
- <code>&lt;conn&gt;://&lt;path&gt;</code> is the location of the catalog or Iceberg warehouse
- <code>params</code> is a list of properties to pass to the catalog. Each parameter must be of the form <code>&lt;key&gt;=&lt;value&gt;</code> and separated with <code>&amp;</code>, similar to HTTP URLs.</p>
<p>The following parameters are officially supported:
- <code>type</code>: Type of catalog. The supported values are listed below. When the connection string is ambiguous, this parameter is used to determine the type of catalog implementation.
- <code>warehouse</code>: Location of the warehouse. Required when creating a new table using Glue, Nessie, or Hive catalog.</p>
<p>The following catalogs are supported:</p>
<ul>
<li>
<p>Hadoop Catalog on Local Filesystem:</p>
<ul>
<li>Used when <code>type=hadoop</code> is specified <strong>or</strong> when <code>&lt;conn&gt;</code> is <code>file</code> or empty</li>
<li><code>&lt;path&gt;</code> is the absolute path to the warehouse (directory containing the database schema)</li>
<li>Parameter <code>warehouse</code> will be ignored if specified</li>
<li>E.g. <code>iceberg://&lt;ABSOLUTE PATH TO ICEBERG WAREHOUSE&gt;</code> or <code>iceberg+file://&lt;ABSOLUTE PATH TO ICEBERG WAREHOUSE&gt;</code></li>
</ul>
</li>
<li>
<p>Hadoop Catalog on S3</p>
<ul>
<li>Used when <code>type=hadoop-s3</code> is specified <strong>or</strong> when <code>&lt;conn&gt;</code> is <code>s3</code></li>
<li><code>&lt;conn&gt;://&lt;path&gt;</code> is the S3 path to the warehouse (directory or bucket containing the database schema)</li>
<li>Parameter <code>warehouse</code> will be ignored if specified</li>
<li>E.g. <code>iceberg+s3://&lt;S3 PATH TO ICEBERG WAREHOUSE&gt;</code></li>
</ul>
</li>
<li>
<p>Dremio Arctic or Nessie Catalog</p>
<ul>
<li>Must specify <code>type=nessie</code> as a parameter to use this warehouse.</li>
<li><code>&lt;conn&gt;://&lt;path&gt;</code> is the URL to the Nessie catalog, which can be found on Dremio's dashboard.<ul>
<li>It will look like the following: <code>https://nessie.dremio.cloud/v1/projects/&lt;PROJECT ID&gt;</code></li>
<li><code>&lt;PROJECT ID&gt;</code> is the Nessie project UUID</li>
</ul>
</li>
<li>The following parameters are required:<ul>
<li><code>authentication.type=BEARER</code></li>
<li><code>authentication.token=&lt;AUTH TOKEN&gt;</code> where <code>&lt;AUTH TOKEN&gt;</code> is your personal Dremio authentication token and can be found on the dashboard</li>
</ul>
</li>
<li>Parameter <code>warehouse</code> is required to create a table</li>
<li>E.g. <code>iceberg+https://nessie.dremio.cloud/v1/projects/&lt;PROJECT ID&gt;?type=nessie&amp;authentication.type=BEARER&amp;authentication.token=&lt;AUTH TOKEN&gt;</code></li>
</ul>
</li>
<li>
<p>AWS Glue Catalog</p>
<ul>
<li>Connection string must be of the form <code>iceberg+glue?&lt;params&gt;</code></li>
<li>Parameter <code>type</code> will be ignored if specified</li>
<li>Parameter <code>warehouse</code> is required to create a table</li>
<li>E.g. <code>iceberg+glue</code> or <code>iceberg+glue?warehouse=s3://&lt;ICEBERG-BUCKET&gt;</code></li>
</ul>
</li>
<li>
<p>Hive / Thrift Catalog</p>
<ul>
<li>Used when <code>type=hive</code> is specified <strong>or</strong> when <code>&lt;conn&gt;</code> is <code>thrift</code></li>
<li><code>&lt;conn&gt;://&lt;path&gt;</code> is the URL to the Thrift catalog, i.e. <code>thrift://localhost:9083</code></li>
<li>Parameter <code>warehouse</code> is required to create the table</li>
<li>E.g. <code>iceberg+thrift://&lt;THRIFT URL&gt;</code></li>
</ul>
</li>
</ul>
<p>Example code for reading:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="k">def</span> <span class="nf">example_read_iceberg</span><span class="p">():</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>            <span class="n">table_name</span><span class="o">=</span><span class="s2">&quot;&lt;NAME OF ICEBERG TABLE&quot;</span><span class="p">,</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>            <span class="n">con</span><span class="o">=</span><span class="s2">&quot;&lt;SEE PREVIOUS SECTION ON HOW TO FORMAT THIS FOR DIFFERENT CATALOGS&gt;&quot;</span><span class="p">,</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>            <span class="n">schema</span><span class="o">=</span><span class="s2">&quot;&lt;NAME OF ICEBERG DATABASE SCHEMA&gt;&quot;</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>         <span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>
<p><code>schema</code> argument is required for reading Iceberg tables.</p>
</li>
<li>
<p>The Iceberg table to read should be located at <code>&lt;warehouse-location&gt;/&lt;schema&gt;/&lt;table_name&gt;</code>,
  where <code>schema</code> and <code>table_name</code> are the arguments to <code>pd.read_sql_table</code>, and <code>warehouse-location</code>
  is inferred from the connection string based on the description provided above.</p>
</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul>
<li>Tables with <a href="https://iceberg.apache.org/spec/#delete-formats" target="blank">delete files</a>
  or those that have gone through
  <a href="https://iceberg.apache.org/docs/latest/evolution/" target="blank">schema evolution</a>
  are not supported yet.</li>
</ul>
</div>
<p>Bodo has basic support for writing Iceberg tables from Pandas Dataframes using the <code>to_sql</code> API, including
support for appending to tables with an existing <a href="https://iceberg.apache.org/spec/#partitioning" target="blank">partition spec</a>
and/or <a href="https://iceberg.apache.org/spec/#sorting" target="blank">sort order</a>.</p>
<p>Example code for writing:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">])</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="k">def</span> <span class="nf">write_iceberg_table</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&lt;NAME OF ICEBERG TABLE&quot;</span><span class="p">,</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>        <span class="n">con</span><span class="o">=</span><span class="s2">&quot;&lt;SEE PREVIOUS SECTION ON HOW TO FORMAT THIS FOR DIFFERENT CATALOGS&gt;&quot;</span><span class="p">,</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>        <span class="n">schema</span><span class="o">=</span><span class="s2">&quot;&lt;NAME OF ICEBERG DATABASE SCHEMA&gt;&quot;</span><span class="p">,</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>        <span class="n">if_exists</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>    <span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><code>schema</code> argument is required for reading Iceberg tables.</li>
<li>Writing Pandas Dataframe index to an Iceberg table is not supported. If <code>index</code> and <code>index_label</code>
  are provided, they will be ignored.</li>
<li><code>chunksize</code>, <code>dtype</code> and <code>method</code> arguments are not supported and will be ignored if provided.</li>
<li>While Bodo can <em>append</em> to tables with an existing partition spec and/or sort order, it does not
  support creating new tables with a Partition Spec or Sort Order.</li>
</ul>
</div>
<h3 id="numpy-binary-section">Numpy binaries<a class="headerlink" href="#numpy-binary-section" title="Permanent link">&para;</a></h3>
<p>Numpy's <code>fromfile</code> and <code>tofile</code> are supported as below:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="k">def</span> <span class="nf">example_np_io</span><span class="p">():</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>    <span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="s2">&quot;myfile.dat&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>    <span class="o">...</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>    <span class="n">A</span><span class="o">.</span><span class="n">tofile</span><span class="p">(</span><span class="s2">&quot;newfile.dat&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Bodo has the same behavior as Numpy for <code>numpy.ndarray.tofile()</code>, where
we always write to a single file. However, writing distributed data to
POSIX is done in parallel, but writing to S3 &amp; HDFS is done sequentially
(due to file system limitations).</p>
<h3 id="hdf5">HDF5<a class="headerlink" href="#hdf5" title="Permanent link">&para;</a></h3>
<p>HDF5 is a common format in scientific computing, especially for
multi-dimensional numerical data. HDF5 can be very efficient at scale,
since it has native parallel I/O support. For HDF5, the syntax is the
same as the <a href="http://www.h5py.org/">h5py</a> package. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="k">def</span> <span class="nf">example_h5</span><span class="p">():</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>    <span class="n">f</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s2">&quot;data.hdf5&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>    <span class="n">X</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s2">&quot;points&quot;</span><span class="p">][:]</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>    <span class="n">Y</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s2">&quot;responses&quot;</span><span class="p">][:]</span>
</code></pre></div>
<h2 Systems="Systems" id="File">File Systems<a class="headerlink" href="#File" title="Permanent link">&para;</a></h2>
<h3 id="S3">Amazon S3<a class="headerlink" href="#S3" title="Permanent link">&para;</a></h3>
<p>Reading and writing <a class="autorefs autorefs-internal" href="#csv-section">CSV</a>, <a class="autorefs autorefs-internal" href="#parquet-section">Parquet</a>, <a class="autorefs autorefs-internal" href="#json-section">JSON</a>, and
<a class="autorefs autorefs-internal" href="#numpy-binary-section">Numpy binary</a> files from and to Amazon S3 is supported.</p>
<p>The file path should start with <code>s3://</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="k">def</span> <span class="nf">example_s3_parquet</span><span class="p">():</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;s3://bucket-name/file_name.parquet&quot;</span><span class="p">)</span>
</code></pre></div>
<p>These environment variables are used for File I/O with S3 credentials:</p>
<ul>
<li><code>AWS_ACCESS_KEY_ID</code></li>
<li><code>AWS_SECRET_ACCESS_KEY</code></li>
<li><code>AWS_DEFAULT_REGION</code>: default as <code>us-east-1</code></li>
<li><code>AWS_S3_ENDPOINT</code>: specify custom host name, default as AWS endpoint(<code>s3.amazonaws.com</code>)</li>
</ul>
<p>Connecting to S3 endpoints through a proxy is supported. The proxy URI can be provided by setting one of the following
environment variables (listed in order of precedence):</p>
<ul>
<li><code>http_proxy</code></li>
<li><code>https_proxy</code></li>
<li><code>HTTP_PROXY</code></li>
<li><code>HTTPS_PROXY</code></li>
</ul>
<p>By default, Bodo uses <a href="https://arrow.apache.org/">Apache Arrow</a> internally for read
and write of data on S3. If additional <code>storage_options</code> are provided to <code>pd.read_parquet</code>
that Arrow does not support, then S3FS will be used instead. It can be optionally installed via:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span><span class="s2">&quot;s3fs&gt;=2022.1.0&quot;</span>
</code></pre></div>
<h3 id="GCS">Google Cloud Storage<a class="headerlink" href="#GCS" title="Permanent link">&para;</a></h3>
<p>Reading and writing <a class="autorefs autorefs-internal" href="#parquet-section">Parquet</a> files from and to Google Cloud is supported.</p>
<p>The file path should start with <code>gs://</code> or <code>gcs://</code>:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="k">def</span> <span class="nf">example_gcs_parquet</span><span class="p">():</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;gcs://bucket-name/file_name.parquet&quot;</span><span class="p">)</span>
</code></pre></div>
These environment variables are used for File I/O with GCS credentials:</p>
<ul>
<li><code>GOOGLE_APPLICATION_CREDENTIALS</code></li>
</ul>
<p>Details for <code>GOOGLE_APPLICATION_CREDENTIALS</code> can be seen in the Google
docs <a href="https://cloud.google.com/docs/authentication/getting-started#setting_the_environment_variable" target="blank">here</a>.</p>
<p>Bodo uses the fsspec-based <a href="https://gcsfs.readthedocs.io/en/latest/" target="blank">gcsfs</a> library internally for
read and write of data on GCS.</p>
<h3 id="HDFS">Hadoop Distributed File System (HDFS) and Azure Data Lake Storage (ADLS) Gen2<a class="headerlink" href="#HDFS" title="Permanent link">&para;</a></h3>
<p>Reading and writing <a class="autorefs autorefs-internal" href="#csv-section">CSV</a>, <a class="autorefs autorefs-internal" href="#parquet-section">Parquet</a>, <a class="autorefs autorefs-internal" href="#json-section">JSON</a>, and
<a class="autorefs autorefs-internal" href="#numpy-binary-section">Numpy binary</a> files from and to Hadoop Distributed File System (HDFS) is supported.
Note that Azure Data Lake Storage Gen2 can be accessed through HDFS.</p>
<p>The <code>openjdk</code> version 11 package must be available, and the file path
should start with <code>hdfs://</code> or <code>abfs[s]://</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="k">def</span> <span class="nf">example_hdfs_parquet</span><span class="p">():</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;hdfs://host:port/dir/file_name.pq&quot;</span><span class="p">)</span>
</code></pre></div>
<p>These environment variables are used for File I/O with HDFS:</p>
<ul>
<li><code>HADOOP_HOME</code>: the root of your installed Hadoop distribution. Often is <code>lib/native/libhdfs.so</code>.</li>
<li><code>ARROW_LIBHDFS_DIR</code>: location of libhdfs. Often is <code>$HADOOP_HOME/lib/native</code>.</li>
<li><code>CLASSPATH</code>: must contain the Hadoop jars. You can set these using:
    <div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">CLASSPATH</span><span class="o">=</span><span class="sb">`</span><span class="nv">$HADOOP_HOME</span>/bin/hdfs<span class="w"> </span>classpath<span class="w"> </span>--glob<span class="sb">`</span>
</code></pre></div></li>
</ul>
<p>Bodo uses <a href="https://arrow.apache.org/">Apache Arrow</a> internally for read
and write of data on HDFS. <code>$HADOOP_HOME/etc/hadoop/hdfs-site.xml</code>
provides default behaviors for the HDFS client used by Bodo.
Inconsistent configurations (e.g. <code>dfs.replication</code>) could potentially
cause errors in Bodo programs.</p>
<h4 id="setting-up-hdfsadls-credentials">Setting up HDFS/ADLS Credentials<a class="headerlink" href="#setting-up-hdfsadls-credentials" title="Permanent link">&para;</a></h4>
<p><strong><em>Setting up HDFS/ADLS Credentials</em></strong></p>
<p>Hadoop Filesystem sources its credentials from the first available
<code>core-site.xml</code> file on the <code>CLASSPATH</code>. When Hadoop is set up (including
on Bodo Platform), this file is usually created at
<code>$HADOOP_HOME/etc/hadoop/core-site.xml</code> automatically.
You can edit this file and set credentials appropriately.</p>
<p>You can also write the core-site configuration to <code>bodo.HDFS_CORE_SITE_LOC</code>,
which is a temporary file Bodo adds to the <code>CLASSPATH</code> when it is initialized:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="c1"># Initialize the temporary directory where the core-site file</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="c1"># will be written</span>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="n">bodo</span><span class="o">.</span><span class="n">HDFS_CORE_SITE_LOC_DIR</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="c1"># Define the core-site for your regular ADLS/HDFS read/write</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="c1"># operations</span>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="n">CORE_SITE_SPEC</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="s2">&lt;configuration&gt;</span>
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="s2">...</span>
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="s2">&lt;/configuration&gt;</span>
<a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a>
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a><span class="c1"># Write it to the temporary core-site file.</span>
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a><span class="c1"># Do it on one rank on every node to avoid filesystem conflicts.</span>
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="ow">in</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_nodes_first_ranks</span><span class="p">():</span>
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">bodo</span><span class="o">.</span><span class="n">HDFS_CORE_SITE_LOC</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">CORE_SITE_SPEC</span><span class="p">)</span>
<a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a>
<a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a>
<a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a><span class="k">def</span> <span class="nf">etl_job</span><span class="p">():</span>
<a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;abfs://</span><span class="si">{CONTAINER_NAME}</span><span class="s2">@</span><span class="si">{STORAGE_ACCOUNT_NAME}</span><span class="s2">.dfs.core.windows.net/file.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a>    <span class="c1"># ..</span>
<a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a>    <span class="c1"># .. Some ETL Processing</span>
<a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a>    <span class="c1"># ..</span>
<a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;abfs://</span><span class="si">{CONTAINER_NAME}</span><span class="s2">@</span><span class="si">{STORAGE_ACCOUNT_NAME}</span><span class="s2">.dfs.core.windows.net/out_file.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a>    <span class="k">return</span>
<a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a>
<a id="__codelineno-39-31" name="__codelineno-39-31" href="#__codelineno-39-31"></a>
<a id="__codelineno-39-32" name="__codelineno-39-32" href="#__codelineno-39-32"></a><span class="n">etl_job</span><span class="p">()</span>
</code></pre></div>
<p>There are several authorization methods for reading from or writing to ADLS Storage Containers, all of which
require slightly different core-site configurations. Here are some examples:</p>
<ul>
<li>
<p>Using an ADLS Access Key</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="c1"># Initialize the temporary directory where the core-site file</span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="c1"># will be written</span>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="n">bodo</span><span class="o">.</span><span class="n">HDFS_CORE_SITE_LOC_DIR</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="c1"># Define the core-site for your regular ADLS/HDFS read/write</span>
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="c1"># operations</span>
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="n">CORE_SITE_SPEC</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;configuration&gt;</span>
<a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a><span class="s2">&lt;property&gt;</span>
<a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a><span class="s2">    &lt;name&gt;fs.abfs.impl&lt;/name&gt;</span>
<a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a><span class="s2">    &lt;value&gt;org.apache.hadoop.fs.azurebfs.AzureBlobFileSystem&lt;/value&gt;</span>
<a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a><span class="s2">&lt;/property&gt;</span>
<a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a><span class="s2">&lt;property&gt;</span>
<a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a><span class="s2">    &lt;name&gt;fs.azure.account.auth.type.</span><span class="si">{STORAGE_ACCOUNT_NAME}</span><span class="s2">.dfs.core.windows.net&lt;/name&gt;</span>
<a id="__codelineno-40-18" name="__codelineno-40-18" href="#__codelineno-40-18"></a><span class="s2">    &lt;value&gt;SharedKey&lt;/value&gt;</span>
<a id="__codelineno-40-19" name="__codelineno-40-19" href="#__codelineno-40-19"></a><span class="s2">&lt;/property&gt;</span>
<a id="__codelineno-40-20" name="__codelineno-40-20" href="#__codelineno-40-20"></a><span class="s2">&lt;property&gt;</span>
<a id="__codelineno-40-21" name="__codelineno-40-21" href="#__codelineno-40-21"></a><span class="s2">    &lt;name&gt;fs.azure.account.key.</span><span class="si">{STORAGE_ACCOUNT_NAME}</span><span class="s2">.dfs.core.windows.net&lt;/name&gt;</span>
<a id="__codelineno-40-22" name="__codelineno-40-22" href="#__codelineno-40-22"></a><span class="s2">    &lt;value&gt;</span><span class="si">{ADLS_SECRET}</span><span class="s2">&lt;/value&gt;</span>
<a id="__codelineno-40-23" name="__codelineno-40-23" href="#__codelineno-40-23"></a><span class="s2">    &lt;description&gt; The ADLS storage account access key itself.&lt;/description&gt;</span>
<a id="__codelineno-40-24" name="__codelineno-40-24" href="#__codelineno-40-24"></a><span class="s2">&lt;/property&gt;</span>
<a id="__codelineno-40-25" name="__codelineno-40-25" href="#__codelineno-40-25"></a><span class="s2">&lt;/configuration&gt;</span>
<a id="__codelineno-40-26" name="__codelineno-40-26" href="#__codelineno-40-26"></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-40-27" name="__codelineno-40-27" href="#__codelineno-40-27"></a>
<a id="__codelineno-40-28" name="__codelineno-40-28" href="#__codelineno-40-28"></a><span class="c1"># Write it to the temporary core-site file.</span>
<a id="__codelineno-40-29" name="__codelineno-40-29" href="#__codelineno-40-29"></a><span class="c1"># Do it on one rank on every node to avoid filesystem conflicts.</span>
<a id="__codelineno-40-30" name="__codelineno-40-30" href="#__codelineno-40-30"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="ow">in</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_nodes_first_ranks</span><span class="p">():</span>
<a id="__codelineno-40-31" name="__codelineno-40-31" href="#__codelineno-40-31"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">bodo</span><span class="o">.</span><span class="n">HDFS_CORE_SITE_LOC</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-40-32" name="__codelineno-40-32" href="#__codelineno-40-32"></a>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">CORE_SITE_SPEC</span><span class="p">)</span>
<a id="__codelineno-40-33" name="__codelineno-40-33" href="#__codelineno-40-33"></a>
<a id="__codelineno-40-34" name="__codelineno-40-34" href="#__codelineno-40-34"></a><span class="c1"># Run your ETL job</span>
<a id="__codelineno-40-35" name="__codelineno-40-35" href="#__codelineno-40-35"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-40-36" name="__codelineno-40-36" href="#__codelineno-40-36"></a><span class="k">def</span> <span class="nf">etl_job</span><span class="p">():</span>
<a id="__codelineno-40-37" name="__codelineno-40-37" href="#__codelineno-40-37"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;abfs://</span><span class="si">{CONTAINER_NAME}</span><span class="s2">@</span><span class="si">{STORAGE_ACCOUNT_NAME}</span><span class="s2">.dfs.core.windows.net/file.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-40-38" name="__codelineno-40-38" href="#__codelineno-40-38"></a>    <span class="c1"># ..</span>
<a id="__codelineno-40-39" name="__codelineno-40-39" href="#__codelineno-40-39"></a>    <span class="c1"># .. Some ETL Processing</span>
<a id="__codelineno-40-40" name="__codelineno-40-40" href="#__codelineno-40-40"></a>    <span class="c1"># ..</span>
<a id="__codelineno-40-41" name="__codelineno-40-41" href="#__codelineno-40-41"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;abfs://</span><span class="si">{CONTAINER_NAME}</span><span class="s2">@</span><span class="si">{STORAGE_ACCOUNT_NAME}</span><span class="s2">.dfs.core.windows.net/out_file.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-40-42" name="__codelineno-40-42" href="#__codelineno-40-42"></a>    <span class="k">return</span>
<a id="__codelineno-40-43" name="__codelineno-40-43" href="#__codelineno-40-43"></a>
<a id="__codelineno-40-44" name="__codelineno-40-44" href="#__codelineno-40-44"></a>
<a id="__codelineno-40-45" name="__codelineno-40-45" href="#__codelineno-40-45"></a><span class="n">etl_job</span><span class="p">()</span>
</code></pre></div>
</li>
<li>
<p>Using a SAS Token</p>
<p>To use SAS Tokens, you need to install the <code>bodo-azurefs-sas-token-provider</code>
package (it can be installed using
<code>conda install bodo-azurefs-sas-token-provider -c bodo.ai -c conda-forge</code>).
This is already installed on the Bodo Platform.
Then in your program, do the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="c1"># Importing this module adds the required JARs to the CLASSPATH</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="kn">import</span> <span class="nn">bodo_azurefs_sas_token_provider</span>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="c1"># Initialize the temporary directory where the core-site file</span>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="c1"># will be written</span>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="n">bodo</span><span class="o">.</span><span class="n">HDFS_CORE_SITE_LOC_DIR</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a>
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a>
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a><span class="c1"># Define the core-site for your regular ADLS/HDFS read/write</span>
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a><span class="c1"># operations</span>
<a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a><span class="n">CORE_SITE_SPEC</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;configuration&gt;</span>
<a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a><span class="s2">    &lt;property&gt;</span>
<a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a><span class="s2">        &lt;name&gt;fs.azure.account.auth.type.</span><span class="si">{STORAGE_ACCOUNT_NAME}</span><span class="s2">.dfs.core.windows.net&lt;/name&gt;</span>
<a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a><span class="s2">        &lt;value&gt;SAS&lt;/value&gt;</span>
<a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a><span class="s2">    &lt;/property&gt;</span>
<a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a><span class="s2">    &lt;property&gt;</span>
<a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a><span class="s2">        &lt;name&gt;fs.azure.sas.token.provider.type.</span><span class="si">{STORAGE_ACCOUNT_NAME}</span><span class="s2">.dfs.core.windows.net&lt;/name&gt;</span>
<a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a><span class="s2">        &lt;value&gt;org.bodo.azurefs.sas.BodoSASTokenProvider&lt;/value&gt;</span>
<a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a><span class="s2">    &lt;/property&gt;</span>
<a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a><span class="s2">    &lt;property&gt;</span>
<a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a><span class="s2">        &lt;name&gt;fs.abfs.impl&lt;/name&gt;</span>
<a id="__codelineno-41-25" name="__codelineno-41-25" href="#__codelineno-41-25"></a><span class="s2">        &lt;value&gt;org.apache.hadoop.fs.azurebfs.AzureBlobFileSystem&lt;/value&gt;</span>
<a id="__codelineno-41-26" name="__codelineno-41-26" href="#__codelineno-41-26"></a><span class="s2">    &lt;/property&gt;</span>
<a id="__codelineno-41-27" name="__codelineno-41-27" href="#__codelineno-41-27"></a><span class="s2">&lt;/configuration&gt;</span>
<a id="__codelineno-41-28" name="__codelineno-41-28" href="#__codelineno-41-28"></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-41-29" name="__codelineno-41-29" href="#__codelineno-41-29"></a>
<a id="__codelineno-41-30" name="__codelineno-41-30" href="#__codelineno-41-30"></a><span class="c1"># Write it to the temporary core-site file.</span>
<a id="__codelineno-41-31" name="__codelineno-41-31" href="#__codelineno-41-31"></a><span class="c1"># Do it on one rank on every node to avoid filesystem conflicts.</span>
<a id="__codelineno-41-32" name="__codelineno-41-32" href="#__codelineno-41-32"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="ow">in</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_nodes_first_ranks</span><span class="p">():</span>
<a id="__codelineno-41-33" name="__codelineno-41-33" href="#__codelineno-41-33"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">bodo</span><span class="o">.</span><span class="n">HDFS_CORE_SITE_LOC</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-41-34" name="__codelineno-41-34" href="#__codelineno-41-34"></a>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">CORE_SITE_SPEC</span><span class="p">)</span>
<a id="__codelineno-41-35" name="__codelineno-41-35" href="#__codelineno-41-35"></a>
<a id="__codelineno-41-36" name="__codelineno-41-36" href="#__codelineno-41-36"></a><span class="c1"># Load the SAS token here.</span>
<a id="__codelineno-41-37" name="__codelineno-41-37" href="#__codelineno-41-37"></a><span class="n">SAS_TOKEN</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>
<a id="__codelineno-41-38" name="__codelineno-41-38" href="#__codelineno-41-38"></a>
<a id="__codelineno-41-39" name="__codelineno-41-39" href="#__codelineno-41-39"></a><span class="c1"># Write SAS Token to a file.</span>
<a id="__codelineno-41-40" name="__codelineno-41-40" href="#__codelineno-41-40"></a><span class="c1"># Do it on one rank on every node to avoid filesystem conflicts.</span>
<a id="__codelineno-41-41" name="__codelineno-41-41" href="#__codelineno-41-41"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="ow">in</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_nodes_first_ranks</span><span class="p">():</span>
<a id="__codelineno-41-42" name="__codelineno-41-42" href="#__codelineno-41-42"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bodo</span><span class="o">.</span><span class="n">HDFS_CORE_SITE_LOC_DIR</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;sas_token.txt&quot;</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-41-43" name="__codelineno-41-43" href="#__codelineno-41-43"></a>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">SAS_TOKEN</span><span class="p">)</span>
<a id="__codelineno-41-44" name="__codelineno-41-44" href="#__codelineno-41-44"></a>
<a id="__codelineno-41-45" name="__codelineno-41-45" href="#__codelineno-41-45"></a><span class="c1"># Run your ETL job</span>
<a id="__codelineno-41-46" name="__codelineno-41-46" href="#__codelineno-41-46"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-41-47" name="__codelineno-41-47" href="#__codelineno-41-47"></a><span class="k">def</span> <span class="nf">etl_job</span><span class="p">():</span>
<a id="__codelineno-41-48" name="__codelineno-41-48" href="#__codelineno-41-48"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;abfs://</span><span class="si">{CONTAINER_NAME}</span><span class="s2">@</span><span class="si">{STORAGE_ACCOUNT_NAME}</span><span class="s2">.dfs.core.windows.net/file.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-41-49" name="__codelineno-41-49" href="#__codelineno-41-49"></a>    <span class="c1"># ..</span>
<a id="__codelineno-41-50" name="__codelineno-41-50" href="#__codelineno-41-50"></a>    <span class="c1"># .. Some ETL Processing</span>
<a id="__codelineno-41-51" name="__codelineno-41-51" href="#__codelineno-41-51"></a>    <span class="c1"># ..</span>
<a id="__codelineno-41-52" name="__codelineno-41-52" href="#__codelineno-41-52"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;abfs://</span><span class="si">{CONTAINER_NAME}</span><span class="s2">@</span><span class="si">{STORAGE_ACCOUNT_NAME}</span><span class="s2">.dfs.core.windows.net/out_file.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-41-53" name="__codelineno-41-53" href="#__codelineno-41-53"></a>    <span class="k">return</span>
<a id="__codelineno-41-54" name="__codelineno-41-54" href="#__codelineno-41-54"></a>
<a id="__codelineno-41-55" name="__codelineno-41-55" href="#__codelineno-41-55"></a>
<a id="__codelineno-41-56" name="__codelineno-41-56" href="#__codelineno-41-56"></a><span class="n">etl_job</span><span class="p">()</span>
</code></pre></div>
</li>
</ul>
<h4 id="interleave-adls-snowflake-write">Interleaving HDFS/ADLS I/O with Snowflake Write<a class="headerlink" href="#interleave-adls-snowflake-write" title="Permanent link">&para;</a></h4>
<p><strong><em>Interleaving HDFS/ADLS I/O with Snowflake Write</em></strong></p>
<p>For writing to an Azure based Snowflake account using the direct upload strategy
(see <a href="#snowflake-write">Snowflake Write</a>), Bodo writes the required core-site
configuration to <code>bodo.HDFS_CORE_SITE_LOC</code> automatically. In cases where Snowflake
write (to an Azure based Snowflake account) needs to be
done in the same process as a regular HDFS/ADLS read/write operation,
users need to write credentials for the regular HDFS/ADLS read/write operations
to the same core-site location (<code>bodo.HDFS_CORE_SITE_LOC</code>)
due to limitations of Arrow and HDFS.
Bodo will modify the file (temporarily) during the Snowflake write operation(s)
and then restore the original configuration for the regular HDFS/ADLS
read/write operations.</p>
<p>Here is an example of how to do so:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="c1"># Initialize the temporary directory where the core-site file</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="c1"># will be written</span>
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="n">bodo</span><span class="o">.</span><span class="n">HDFS_CORE_SITE_LOC_DIR</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="c1"># Define the core-site for your regular ADLS/HDFS read/write</span>
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="c1"># operations</span>
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a><span class="n">CORE_SITE_SPEC</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;configuration&gt;</span>
<a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a><span class="s2">...</span>
<a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a><span class="s2">&lt;/configuration&gt;</span>
<a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-42-15" name="__codelineno-42-15" href="#__codelineno-42-15"></a>
<a id="__codelineno-42-16" name="__codelineno-42-16" href="#__codelineno-42-16"></a><span class="c1"># Write it to the temporary core-site file</span>
<a id="__codelineno-42-17" name="__codelineno-42-17" href="#__codelineno-42-17"></a><span class="c1"># Do it on one rank on every node to avoid filesystem conflicts.</span>
<a id="__codelineno-42-18" name="__codelineno-42-18" href="#__codelineno-42-18"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="ow">in</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_nodes_first_ranks</span><span class="p">():</span>
<a id="__codelineno-42-19" name="__codelineno-42-19" href="#__codelineno-42-19"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">bodo</span><span class="o">.</span><span class="n">HDFS_CORE_SITE_LOC</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-42-20" name="__codelineno-42-20" href="#__codelineno-42-20"></a>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">CORE_SITE_SPEC</span><span class="p">)</span>
<a id="__codelineno-42-21" name="__codelineno-42-21" href="#__codelineno-42-21"></a>
<a id="__codelineno-42-22" name="__codelineno-42-22" href="#__codelineno-42-22"></a>
<a id="__codelineno-42-23" name="__codelineno-42-23" href="#__codelineno-42-23"></a><span class="c1"># Write the SAS token if required.</span>
<a id="__codelineno-42-24" name="__codelineno-42-24" href="#__codelineno-42-24"></a><span class="c1"># import bodo_azurefs_sas_token_provider</span>
<a id="__codelineno-42-25" name="__codelineno-42-25" href="#__codelineno-42-25"></a><span class="c1"># SAS_TOKEN = &quot;...&quot;</span>
<a id="__codelineno-42-26" name="__codelineno-42-26" href="#__codelineno-42-26"></a><span class="c1"># if bodo.get_rank() in bodo.get_nodes_first_ranks():</span>
<a id="__codelineno-42-27" name="__codelineno-42-27" href="#__codelineno-42-27"></a><span class="c1">#     with open(os.path.join(bodo.HDFS_CORE_SITE_LOC_DIR.name, &quot;sas_token.txt&quot;), &#39;w&#39;) as f:</span>
<a id="__codelineno-42-28" name="__codelineno-42-28" href="#__codelineno-42-28"></a><span class="c1">#         f.write(SAS_TOKEN)</span>
<a id="__codelineno-42-29" name="__codelineno-42-29" href="#__codelineno-42-29"></a>
<a id="__codelineno-42-30" name="__codelineno-42-30" href="#__codelineno-42-30"></a>
<a id="__codelineno-42-31" name="__codelineno-42-31" href="#__codelineno-42-31"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-42-32" name="__codelineno-42-32" href="#__codelineno-42-32"></a><span class="k">def</span> <span class="nf">etl_job</span><span class="p">():</span>
<a id="__codelineno-42-33" name="__codelineno-42-33" href="#__codelineno-42-33"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;abfs://</span><span class="si">{CONTAINER_NAME}</span><span class="s2">@</span><span class="si">{STORAGE_ACCOUNT_NAME}</span><span class="s2">.dfs.core.windows.net/file.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-42-34" name="__codelineno-42-34" href="#__codelineno-42-34"></a>    <span class="c1"># ..</span>
<a id="__codelineno-42-35" name="__codelineno-42-35" href="#__codelineno-42-35"></a>    <span class="c1"># .. Some ETL Processing</span>
<a id="__codelineno-42-36" name="__codelineno-42-36" href="#__codelineno-42-36"></a>    <span class="c1"># ..</span>
<a id="__codelineno-42-37" name="__codelineno-42-37" href="#__codelineno-42-37"></a>    <span class="c1"># Here Bodo will replace the core-site configuration to enable Snowflake write</span>
<a id="__codelineno-42-38" name="__codelineno-42-38" href="#__codelineno-42-38"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s2">&quot;new_table&quot;</span><span class="p">,</span> <span class="s2">&quot;snowflake://user:password@url/</span><span class="si">{db_name}</span><span class="s2">/schema?warehouse=warehouse_name&amp;role=role_name&quot;</span><span class="p">)</span>
<a id="__codelineno-42-39" name="__codelineno-42-39" href="#__codelineno-42-39"></a>    <span class="c1"># Once done, Bodo will restore the contents of the original file so that your</span>
<a id="__codelineno-42-40" name="__codelineno-42-40" href="#__codelineno-42-40"></a>    <span class="c1"># ADLS operations happen as expected.</span>
<a id="__codelineno-42-41" name="__codelineno-42-41" href="#__codelineno-42-41"></a>    <span class="c1"># ..</span>
<a id="__codelineno-42-42" name="__codelineno-42-42" href="#__codelineno-42-42"></a>    <span class="c1"># .. Some more ETL Processing</span>
<a id="__codelineno-42-43" name="__codelineno-42-43" href="#__codelineno-42-43"></a>    <span class="c1"># ..</span>
<a id="__codelineno-42-44" name="__codelineno-42-44" href="#__codelineno-42-44"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;abfs://</span><span class="si">{CONTAINER_NAME}</span><span class="s2">@</span><span class="si">{STORAGE_ACCOUNT_NAME}</span><span class="s2">.dfs.core.windows.net/out_file.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-42-45" name="__codelineno-42-45" href="#__codelineno-42-45"></a>    <span class="k">return</span>
<a id="__codelineno-42-46" name="__codelineno-42-46" href="#__codelineno-42-46"></a>
<a id="__codelineno-42-47" name="__codelineno-42-47" href="#__codelineno-42-47"></a>
<a id="__codelineno-42-48" name="__codelineno-42-48" href="#__codelineno-42-48"></a><span class="n">etl_job</span><span class="p">()</span>
</code></pre></div>
<h2 id="db">Databases<a class="headerlink" href="#db" title="Permanent link">&para;</a></h2>
<p>Currently, Bodo supports most RDBMS that work with SQLAlchemy, with a
corresponding driver.</p>
<h2 id="snowflake-section">Snowflake<a class="headerlink" href="#snowflake-section" title="Permanent link">&para;</a></h2>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<p>In order to be able to query Snowflake or write a dataframe to
Snowflake from Bodo, installing the Snowflake connector is
necessary (it is installed by default on Bodo Platform).
If you are using Bodo in a conda environment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>snowflake-connector-python
</code></pre></div>
<p>If you have installed Bodo using pip, then you can install the Snowflake
connector using pip as well:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>pip<span class="w"> </span>install<span class="w"> </span>snowflake-connector-python
</code></pre></div>
<h2 id="reading-from-snowflake">Reading from Snowflake<a class="headerlink" href="#reading-from-snowflake" title="Permanent link">&para;</a></h2>
<p>To read a dataframe from a Snowflake database, users can use
<code>pd.read_sql</code> with their Snowflake username and password:
<code>pd.read_sql(query, "snowflake://&lt;username&gt;:&lt;password&gt;@url")</code>.</p>
<h3 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h3>
<p>Bodo requires the Snowflake connection string to be passed as an
argument to the <code>pd.read_sql</code> function. The complete code looks as
follows:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="k">def</span> <span class="nf">read_snowflake</span><span class="p">(</span><span class="n">db_name</span><span class="p">,</span> <span class="n">table_name</span><span class="p">):</span>
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>            <span class="sa">f</span><span class="s2">&quot;SELECT * FROM </span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>            <span class="sa">f</span><span class="s2">&quot;snowflake://user:password@url/</span><span class="si">{</span><span class="n">db_name</span><span class="si">}</span><span class="s2">/schema?warehouse=warehouse_name&quot;</span><span class="p">,</span>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>        <span class="p">)</span>
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a>    <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="n">df</span> <span class="o">=</span> <span class="n">read_snowflake</span><span class="p">(</span><span class="n">db_name</span><span class="p">,</span> <span class="n">temp_table_name</span><span class="p">)</span>
</code></pre></div>
- <code>_bodo_read_as_dict</code> is a Bodo specific argument which forces
    the specified string columns to be read with dictionary-encoding. Bodo automatically loads string columns using dictionary encoding when it determines it would be beneficial based on a heuristic. Dictionary-encoding stores data in memory in an efficient manner and is most effective when the column has many repeated values. Read more about dictionary-encoded layout <a href="https://arrow.apache.org/docs/format/Columnar.html#dictionary-encoded-layout" target="blank">here</a>.
    Bodo will raise a warning if the specified columns are not present in the schema or if they are not of type string.</p>
<div class="highlight"><pre><span></span><code>For example:
```py
@bodo.jit()
def impl(query, conn):
    df = pd.read_sql(query, conn, _bodo_read_as_dict=[&quot;A&quot;, &quot;B&quot;, &quot;C&quot;])
    return df
```
</code></pre></div>
<h2 id="snowflake-write">Writing to Snowflake<a class="headerlink" href="#snowflake-write" title="Permanent link">&para;</a></h2>
<p>To write a dataframe to Snowflake using Bodo, users can use
<code>df.to_sql</code> with their Snowflake username and password:
<code>df.to_sql(table_name, "snowflake://&lt;username&gt;:&lt;password&gt;@url")</code>.</p>
<h3 id="snowflake-write-usage">Usage<a class="headerlink" href="#snowflake-write-usage" title="Permanent link">&para;</a></h3>
<p>Bodo requires the Snowflake connection string to be passed as an
argument to the <code>df.to_sql</code> function. The complete code looks as
follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">])</span>
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="k">def</span> <span class="nf">write_to_snowflake</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">table_name</span><span class="p">):</span>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span>
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>        <span class="n">table_name</span><span class="p">,</span>
<a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>        <span class="s2">&quot;snowflake://user:password@url/db_name/schema?warehouse=warehouse_name&amp;role=role_name&quot;</span><span class="p">,</span>
<a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a>    <span class="p">)</span>
<a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a>
<a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a><span class="n">write_to_snowflake</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">table_name</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>Writing Pandas Dataframe index to Snowflake is not supported. If <code>index</code> and/or <code>index_label</code>
  are provided, they will be ignored.</li>
<li><code>if_exists=append</code> is needed if you want to append to a table that already exists in Snowflake.</li>
<li><code>chunksize</code> argument is supported and used for writing parquet files to Snowflake stage
  in batches. It is the maximum number of rows to write to any of the intermediate parquet files.
  When not provided, Bodo will estimate and use a reasonable chunk size.</li>
<li><code>dtype</code> and <code>method</code> arguments are not supported and will be ignored if provided.</li>
</ul>
</div>
<h3 id="required-snowflake-permissions">Required Snowflake Permissions<a class="headerlink" href="#required-snowflake-permissions" title="Permanent link">&para;</a></h3>
<h4 id="snowflake-write-perms-create">Creating a new table<a class="headerlink" href="#snowflake-write-perms-create" title="Permanent link">&para;</a></h4>
<p><strong><em>Creating a new table</em></strong></p>
<p>To create a new table, the role being used must have the <code>USAGE</code> permission
at the database level. In addition, the following permissions are
required at the Schema level:</p>
<ul>
<li><code>USAGE</code></li>
<li><code>CREATE TABLE</code></li>
<li><code>CREATE STAGE</code></li>
</ul>
<h4 id="replacing-an-existing-table">Replacing an existing table<a class="headerlink" href="#replacing-an-existing-table" title="Permanent link">&para;</a></h4>
<p><strong><em>Replacing an existing table</em></strong></p>
<p>To replace an existing table (i.e. when using <code>if_exists='replace'</code>), the role
must be an owner of the table, in addition to having the permissions listed in the
<a href="#snowflake-write-perms-create">create section</a> (at the Database and Schema level).</p>
<h4 id="appending-to-an-existing-table">Appending to an existing table<a class="headerlink" href="#appending-to-an-existing-table" title="Permanent link">&para;</a></h4>
<p><strong><em>Appending to an existing table</em></strong></p>
<p>To append to an existing table (i.e. when using <code>if_exists='append'</code>), the role
must have the <code>INSERT</code> permission at the table level, in addition to the
permissions listed in the <a href="#snowflake-write-perms-create">create section</a>
(at the Database and Schema level).</p>
<h4 id="verifying-your-roles-permissions-in-snowflake">Verifying your role's permissions in Snowflake<a class="headerlink" href="#verifying-your-roles-permissions-in-snowflake" title="Permanent link">&para;</a></h4>
<p><strong><em>Verifying your role's permissions in Snowflake</em></strong></p>
<p>You can check the permissions granted to your role in Snowflake
using the
<a href="https://docs.snowflake.com/en/sql-reference/sql/show-grants.html" target="blank"><code>SHOW GRANTS</code> command</a>, e.g.:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="k">show</span><span class="w"> </span><span class="n">grants</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class="n">test_role</span>
</code></pre></div>
<p>Alternatively, you can check the permissions at the database/schema/table level
and verify that your role has the required permissions, e.g.:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="c1">-- Check that your role has the USAGE permission on the database</span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="k">show</span><span class="w"> </span><span class="n">grants</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">test_db</span>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="c1">-- Check that your role has the required permissions on the schema</span>
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="k">show</span><span class="w"> </span><span class="n">grants</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">schema</span><span class="w"> </span><span class="n">test_schema</span>
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="c1">-- Check that your role has the required permissions on the table</span>
<a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a><span class="k">show</span><span class="w"> </span><span class="n">grants</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">test_schema</span><span class="p">.</span><span class="ss">&quot;TEST_TABLE&quot;</span>
</code></pre></div>
<p>You can also use the
<a href="https://docs.snowflake.com/en/user-guide/ui-snowsight.html" target="blank">Snowsight UI</a>
to check these permissions by navigating to the <code>Privileges</code> section of the
<code>Details</code> tab of the database/schema/table.</p>
<h3 id="advanced-configuration-options">Advanced Configuration Options<a class="headerlink" href="#advanced-configuration-options" title="Permanent link">&para;</a></h3>
<p>Bodo provides highly performant distributed Snowflake write capability.
This is done by writing parquet files to a Snowflake stage and then
using Snowflake's <code>COPY INTO</code> to load the data into the Snowflake table.
Based on the type of your Snowflake account (i.e. whether it is
an AWS or Azure or GCP based account) and your environment (i.e.
whether certain packages and modules are installed), Bodo will
use one of two strategies to write to Snowflake:
Direct Upload (preferred) or Put Upload.</p>
<ol>
<li>
<p>Direct Upload: In this strategy, Bodo creates a temporary stage
    and writes parquet files to it directly. Once these files are
    written, Bodo will automatically execute the <code>COPY INTO</code> command
    to copy the data into Snowflake. This is supported on
    S3 and ADLS based Snowflake stages (used by AWS and Azure based
    Snowflake accounts, respectively). Note that Bodo will drop the
    temporary stage once the data has been written. Temporary stages
    are also automatically cleaned up by Snowflake after the session ends.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For writing to ADLS based stages, you must have Hadoop setup
correctly (see more details <a href="#HDFS">here</a>)
and have the <code>bodo-azurefs-sas-token-provider</code> package installed (it
can be installed using
<code>conda install bodo-azurefs-sas-token-provider -c bodo.ai -c conda-forge</code>).
Bodo will fall back to the Put Upload strategy if both these
conditions are not met. Also see
<a href="#interleave-adls-snowflake-write">Interleaving HDFS/ADLS I/O with Snowflake Write</a>.</p>
<p>Note that this is only applicable to
on-prem use cases since all of this is pre-configured on
the Bodo Platform.</p>
</div>
</li>
<li>
<p>Put Upload: In this strategy, Bodo creates a 'named' stage, writes
    parquet files to a temporary directory locally and then uses the
    Snowflake Python Connector to upload these files to this named stage
    using the <code>PUT</code> command. Similar to the Direct Upload strategy,
    once the files have been transferred, Bodo will automatically
    execute the <code>COPY INTO</code> command to copy the data into Snowflake.
    This is used for GCS based stages (used by GCP based Snowflake
    accounts), or when the user environment doesn't have all the
    required packages and modules to use the Direct Upload strategy.</p>
<p>Similar to the Direct Upload strategy, Bodo will drop the named stage
after the data has been written to the table.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In some cases, e.g. during abnormal exits, Bodo may not be able
to drop these stages, which may require manual cleanup by the
user. All stages created by Bodo are of the form
"bodo_io_snowflake_{random-uuid}". You can list all stages
created by Bodo in Snowflake by executing the
<a href="https://docs.snowflake.com/en/sql-reference/sql/show-stages.html" target="blank"><code>SHOW STAGES</code> command</a>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="k">show</span><span class="w"> </span><span class="n">stages</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;bodo_io_snowflake_%&#39;</span><span class="p">;</span>
</code></pre></div>
<p>and then delete them using the
<a href="https://docs.snowflake.com/en/sql-reference/sql/drop-stage.html" target="blank"><code>DROP STAGE</code> command</a>, e.g.:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="k">drop</span><span class="w"> </span><span class="n">stage</span><span class="w"> </span><span class="ss">&quot;bodo_io_snowflake_02ca9beb-eaf6-4957-a6ff-ff426441cd7a&quot;</span><span class="p">;</span>
</code></pre></div>
<p>These operations are not supported in Bodo and must be executed directly
through the Snowflake console.</p>
</div>
</li>
</ol>
<p>Direct Upload is the preferred strategy and used by default whenever
possible. When this is not possible, Bodo will show a warning to the
user. For optimal Snowflake ingestion performance, Bodo writes
multiple small intermediate parquet files on each rank, instead of a
single file like it does for regular parquet writes.</p>
<p>Users can set the environment variable <code>BODO_SF_WRITE_DEBUG</code> (to any value),
to get more details during the Snowflake write process. This includes printing
the raw result of the <code>COPY INTO</code> command execution, and printing more
detailed error messages in case of exceptions.</p>
<p>Bodo exposes the following configuration variables for tuning
the write process further (for advanced users only):</p>
<ul>
<li><code>SF_WRITE_UPLOAD_USING_PUT</code>: This configuration variable can be set to <code>True</code>
  to force Bodo to use the Put Upload strategy. This is <code>False</code> by default
  since Direct Upload is the preferred strategy.</li>
<li><code>SF_WRITE_PARQUET_COMPRESSION</code>: This configuration variable can set to
  specify the compression method used for writing the intermediate
  Parquet files. Supported values include: <code>"snappy"</code>, <code>"gzip"</code>
  and <code>"zstd"</code>. Bodo uses <code>"snappy"</code> by default since it provided
  the best overall performance in our benchmarks, however this can vary
  based on your data.</li>
<li><code>SF_WRITE_PARQUET_CHUNK_SIZE</code>: This configuration variable can be
  used to specify the chunk size to use when writing the dataframe to
  the intermediate Parquet files. This is measured by the uncompressed
  memory usage of the dataframe (in bytes). Note that when provided,
  <code>df.to_sql</code>'s <code>chunksize</code> parameter (see description in note in
  the <a href="#snowflake-write-usage">Usage section</a>) overrides this value.</li>
</ul>
<p>These can be set as follows:
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="kn">import</span> <span class="nn">bodo.io.snowflake</span>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="n">bodo</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">snowflake</span><span class="o">.</span><span class="n">SF_WRITE_UPLOAD_USING_PUT</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="n">bodo</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">snowflake</span><span class="o">.</span><span class="n">SF_WRITE_PARQUET_COMPRESSION</span> <span class="o">=</span> <span class="s2">&quot;gzip&quot;</span>
<a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a><span class="o">...</span>
</code></pre></div></p>
<h2 id="mysql">MySQL<a class="headerlink" href="#mysql" title="Permanent link">&para;</a></h2>
<h3 id="prerequisites_1">Prerequisites<a class="headerlink" href="#prerequisites_1" title="Permanent link">&para;</a></h3>
<p>In addition to <code>sqlalchemy</code>, installing <code>pymysql</code> is required.
If you are using Bodo in a conda environment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>conda<span class="w"> </span>install<span class="w"> </span>pymysql<span class="w"> </span>-c<span class="w"> </span>conda-forge
</code></pre></div>
<p>If you have installed Bodo using pip:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>pip<span class="w"> </span>install<span class="w"> </span>PyMySQL
</code></pre></div>
<h3 id="usage_1">Usage<a class="headerlink" href="#usage_1" title="Permanent link">&para;</a></h3>
<p>Reading result of a SQL query in a dataframe:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">])</span>
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="k">def</span> <span class="nf">read_mysql</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">conn</span><span class="p">):</span>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a>            <span class="sa">f</span><span class="s2">&quot;SELECT * FROM </span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a>            <span class="n">conn</span>
<a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a>        <span class="p">)</span>
<a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a>    <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a>
<a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a>
<a id="__codelineno-55-14" name="__codelineno-55-14" href="#__codelineno-55-14"></a><span class="n">table_name</span> <span class="o">=</span> <span class="s2">&quot;test_table&quot;</span>
<a id="__codelineno-55-15" name="__codelineno-55-15" href="#__codelineno-55-15"></a><span class="n">conn</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;mysql+pymysql://</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">db_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-55-16" name="__codelineno-55-16" href="#__codelineno-55-16"></a><span class="n">df</span> <span class="o">=</span> <span class="n">read_mysql</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
</code></pre></div>
<p>Writing dataframe as a table in the database:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a>
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">])</span>
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="k">def</span> <span class="nf">write_mysql</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">conn</span><span class="p">):</span>
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
<a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a>
<a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a>
<a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a><span class="n">table_name</span> <span class="o">=</span> <span class="s2">&quot;test_table&quot;</span>
<a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.12</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">213</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">})</span>
<a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a><span class="n">conn</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;mysql+pymysql://</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">db_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a><span class="n">write_mysql</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
</code></pre></div>
<h2 id="oracle-database">Oracle Database<a class="headerlink" href="#oracle-database" title="Permanent link">&para;</a></h2>
<h3 id="prerequisites_2">Prerequisites<a class="headerlink" href="#prerequisites_2" title="Permanent link">&para;</a></h3>
<p>In addition to <code>sqlalchemy</code>, install <code>cx_oracle</code> and Oracle instant client driver.
If you are using Bodo in a conda environment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>conda<span class="w"> </span>install<span class="w"> </span>cx_oracle<span class="w"> </span>-c<span class="w"> </span>conda-forge
</code></pre></div>
<p>If you have installed Bodo using pip:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>pip<span class="w"> </span>install<span class="w"> </span>cx-Oracle
</code></pre></div>
<ul>
<li>Then, Download "Basic" or "Basic light" package matching your operating system from <a href="https://www.oracle.com/database/technologies/instant-client/downloads.html" target="blank">here</a>.</li>
<li>Unzip package and add it to <code>LD_LIBRARY_PATH</code> environment variable.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For linux <code>libaio</code> package is required as well.</p>
<ul>
<li>conda: <code>conda install libaio -c conda-forge</code></li>
<li>pip: <code>pip install libaio</code></li>
</ul>
</div>
<p>See <a href="https://cx-oracle.readthedocs.io/en/latest/user_guide/installation.html#cx-oracle-8-installation&gt;" target="blank">cx_oracle</a> for more information.
Alternatively, Oracle instant driver can be automatically downloaded using <code>wget</code> or <code>curl</code> commands.
Here's an example of automatic installation on a Linux OS machine.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>conda<span class="w"> </span>install<span class="w"> </span>cx_oracle<span class="w"> </span>libaio<span class="w"> </span>-c<span class="w"> </span>conda-forge
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/opt/oracle
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="nb">cd</span><span class="w"> </span>/opt/oracle
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a>wget<span class="w"> </span>https://download.oracle.com/otn_software/linux/instantclient/215000/instantclient-basic-linux.x64-21.5.0.0.0dbru.zip
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>unzip<span class="w"> </span>instantclient-basic-linux.x64-21.5.0.0.0dbru.zip
<a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/opt/oracle/instantclient_21_5:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div>
<h3 id="usage_2">Usage<a class="headerlink" href="#usage_2" title="Permanent link">&para;</a></h3>
<p>Reading result of a SQL query in a dataframe:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">])</span>
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a><span class="k">def</span> <span class="nf">read_oracle</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">conn</span><span class="p">):</span>
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>
<a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a>            <span class="sa">f</span><span class="s2">&quot;SELECT * FROM </span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a>            <span class="n">conn</span>
<a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a>        <span class="p">)</span>
<a id="__codelineno-60-11" name="__codelineno-60-11" href="#__codelineno-60-11"></a>    <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-60-12" name="__codelineno-60-12" href="#__codelineno-60-12"></a>
<a id="__codelineno-60-13" name="__codelineno-60-13" href="#__codelineno-60-13"></a>
<a id="__codelineno-60-14" name="__codelineno-60-14" href="#__codelineno-60-14"></a><span class="n">table_name</span> <span class="o">=</span> <span class="s2">&quot;test_table&quot;</span>
<a id="__codelineno-60-15" name="__codelineno-60-15" href="#__codelineno-60-15"></a><span class="n">conn</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;oracle+cx_oracle://</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">db_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-60-16" name="__codelineno-60-16" href="#__codelineno-60-16"></a><span class="n">df</span> <span class="o">=</span> <span class="n">read_oracle</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
</code></pre></div>
<p>Writing dataframe as a table in the database:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a>
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">])</span>
<a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="k">def</span> <span class="nf">write_mysql</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">conn</span><span class="p">):</span>
<a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
<a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a>
<a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a>
<a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a><span class="n">table_name</span> <span class="o">=</span> <span class="s2">&quot;test_table&quot;</span>
<a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.12</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">213</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">})</span>
<a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a><span class="n">conn</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;oracle+cx_oracle://</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">db_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-61-13" name="__codelineno-61-13" href="#__codelineno-61-13"></a><span class="n">write_mysql</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
</code></pre></div>
<h2 id="postgresql">PostgreSQL<a class="headerlink" href="#postgresql" title="Permanent link">&para;</a></h2>
<h3 id="prerequisites_3">Prerequisites<a class="headerlink" href="#prerequisites_3" title="Permanent link">&para;</a></h3>
<p>In addition to <code>sqlalchemy</code>, install <code>psycopg2</code>.</p>
<p>If you are using Bodo in a conda environment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>conda<span class="w"> </span>install<span class="w"> </span>psycopg2<span class="w"> </span>-c<span class="w"> </span>conda-forge
</code></pre></div>
<p>If you have installed Bodo using pip:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>psycopg2
</code></pre></div>
<h3 id="usage_3">Usage<a class="headerlink" href="#usage_3" title="Permanent link">&para;</a></h3>
<p>Reading result of a SQL query in a dataframe:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">])</span>
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="k">def</span> <span class="nf">read_postgresql</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">conn</span><span class="p">):</span>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a>            <span class="sa">f</span><span class="s2">&quot;SELECT * FROM </span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a>            <span class="n">conn</span>
<a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a>        <span class="p">)</span>
<a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a>    <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a>
<a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a>
<a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a><span class="n">table_name</span> <span class="o">=</span> <span class="s2">&quot;test_table&quot;</span>
<a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a><span class="n">conn</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;postgresql+psycopg2://</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">db_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a><span class="n">df</span> <span class="o">=</span> <span class="n">read_postgresql</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
</code></pre></div>
<p>Writing dataframe as a table in the database:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a>
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">])</span>
<a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="k">def</span> <span class="nf">write_postgresql</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">conn</span><span class="p">):</span>
<a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
<a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a>
<a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a>
<a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a><span class="n">table_name</span> <span class="o">=</span> <span class="s2">&quot;test_table&quot;</span>
<a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.12</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">213</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">})</span>
<a id="__codelineno-65-12" name="__codelineno-65-12" href="#__codelineno-65-12"></a><span class="n">conn</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;postgresql+psycopg2://</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">db_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-65-13" name="__codelineno-65-13" href="#__codelineno-65-13"></a><span class="n">write_postgresql</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
</code></pre></div>
<h2 id="non-constant-filepaths">Specifying I/O Data Types Manually<a class="headerlink" href="#non-constant-filepaths" title="Permanent link">&para;</a></h2>
<p>In some rase use cases, the dataset path cannot be a constant value
or a JIT function argument. In such cases, the path is determined dynamically, which does not allow automatic Bodo data type inference.
Therefore, the user has to provide the data types manually.
For example, <code>names</code> and <code>dtypes</code> keyword arguments of <code>pd.read_csv</code> and <code>pd.read_excel</code>
allow the user to specify the data types:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="k">def</span> <span class="nf">example_csv</span><span class="p">(</span><span class="n">fname1</span><span class="p">,</span> <span class="n">fname2</span><span class="p">,</span> <span class="n">flag</span><span class="p">):</span>
<a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a>    <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
<a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname1</span>
<a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname2</span>
<a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a>    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">})</span>
</code></pre></div>
<p>For other pandas read functions, the existing APIs do not
currently allow this information to be provided.
Users can still provide
typing information in the <code>bodo.jit</code> decorator,
similar to <a href="http://numba.pydata.org/numba-doc/latest/reference/types.html" target="blank">Numba's typing syntax</a>.
For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="nb">locals</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;df&quot;</span><span class="p">:{</span><span class="s2">&quot;one&quot;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">float64</span><span class="p">[:],</span>
<a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>                  <span class="s2">&quot;two&quot;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">string_array_type</span><span class="p">,</span>
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a>                  <span class="s2">&quot;three&quot;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">bool_</span><span class="p">[:],</span>
<a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a>                  <span class="s2">&quot;four&quot;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">float64</span><span class="p">[:],</span>
<a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a>                  <span class="s2">&quot;five&quot;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">string_array_type</span><span class="p">,</span>
<a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a>                  <span class="p">}})</span>
<a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a><span class="k">def</span> <span class="nf">example_df_schema</span><span class="p">(</span><span class="n">fname1</span><span class="p">,</span> <span class="n">fname2</span><span class="p">,</span> <span class="n">flag</span><span class="p">):</span>
<a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a>    <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
<a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname1</span>
<a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-67-11" name="__codelineno-67-11" href="#__codelineno-67-11"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname2</span>
<a id="__codelineno-67-12" name="__codelineno-67-12" href="#__codelineno-67-12"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
<a id="__codelineno-67-13" name="__codelineno-67-13" href="#__codelineno-67-13"></a>    <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-67-14" name="__codelineno-67-14" href="#__codelineno-67-14"></a>
<a id="__codelineno-67-15" name="__codelineno-67-15" href="#__codelineno-67-15"></a>
<a id="__codelineno-67-16" name="__codelineno-67-16" href="#__codelineno-67-16"></a> <span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="nb">locals</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X&quot;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">float64</span><span class="p">[:,:],</span> <span class="s2">&quot;Y&quot;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">float64</span><span class="p">[:]})</span>
<a id="__codelineno-67-17" name="__codelineno-67-17" href="#__codelineno-67-17"></a> <span class="k">def</span> <span class="nf">example_h5</span><span class="p">(</span><span class="n">fname1</span><span class="p">,</span> <span class="n">fname2</span><span class="p">,</span> <span class="n">flag</span><span class="p">):</span>
<a id="__codelineno-67-18" name="__codelineno-67-18" href="#__codelineno-67-18"></a>    <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
<a id="__codelineno-67-19" name="__codelineno-67-19" href="#__codelineno-67-19"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname1</span>
<a id="__codelineno-67-20" name="__codelineno-67-20" href="#__codelineno-67-20"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-67-21" name="__codelineno-67-21" href="#__codelineno-67-21"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname2</span>
<a id="__codelineno-67-22" name="__codelineno-67-22" href="#__codelineno-67-22"></a>     <span class="n">f</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<a id="__codelineno-67-23" name="__codelineno-67-23" href="#__codelineno-67-23"></a>     <span class="n">X</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s2">&quot;points&quot;</span><span class="p">][:]</span>
<a id="__codelineno-67-24" name="__codelineno-67-24" href="#__codelineno-67-24"></a>     <span class="n">Y</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s2">&quot;responses&quot;</span><span class="p">][:]</span>
</code></pre></div>
<p>For the complete list of supported types, please see the <a class="autorefs autorefs-internal" href="../bodo_parallelism/typing_considerations/#pandas-dtype">pandas dtype section</a>.
In the event that the dtypes are improperly specified, Bodo will throw a runtime error.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Providing data types manually is error-prone and should be
avoided as much as possible.</p>
</div>

  
  



  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback! Help us improve this page by filing an <a href="https://github.com/Bodo-inc/Feedback/issues/new" target=_blank>issue</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019 - 2022 Bodo, Inc.
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://join.slack.com/t/bodocommunity/shared_invite/zt-qwdc8fad-6rZ8a1RmkkJ6eOX1X__knA" target="_blank" rel="noopener" title="join.slack.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://discourse.bodo.ai" target="_blank" rel="noopener" title="discourse.bodo.ai" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9C448 134.3 348.6 32 225.9 32zM224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/Bodo-Inc/Feedback" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/bodo_ai" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/19205698" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "navigation.indexes", "navigation.expand", "search.highlight", "search.suggest", "toc.follow", "navigation.path", "content.tooltips"], "search": "../assets/javascripts/workers/search.6c7302c4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.7ce0e818.min.js"></script>
      
    
  </body>
</html>