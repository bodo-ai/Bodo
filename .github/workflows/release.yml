name: Release
on:
  release:
    types: [created]

jobs:
  bodo-conda-community:
    strategy:
      # Don't cancel other jobs if one fails
      fail-fast: false
      matrix:
        python-version: ['3.10', '3.11', '3.12']
    uses: Bodo-inc/Bodo/.github/workflows/_build_bodo_conda.yml@develop
    with:
      python-version: ${{ matrix.python-version }}
      platform-build: false
      is-release: ${{ github.event_name == 'release' }}
    secrets: inherit

  bodo-conda-platform:
    uses: Bodo-inc/Bodo/.github/workflows/_build_bodo_conda.yml@develop
    with:
      python-version: '3.12'
      platform-build: true
      is-release: ${{ github.event_name == 'release' }}
    secrets: inherit

  # TODO: Include BodoSQL, Iceberg, Azure SAS, E2E tests, and AMI
