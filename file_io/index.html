
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Bodo offers a new type of just-in-time compiler with Supercomputing-style performance and the simplicity of using native Python.">
      
      
        <meta name="author" content="Bodo Team">
      
      
        <link rel="canonical" href="https://docs.bodo.ai/file_io/">
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.1">
    
    
      
        <title>Scalable File I/O - Bodo Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e8d9bf0c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/bodo.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="bodo-light" data-md-color-accent="bodo-green">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#file_io" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Bodo Developer Documentation" class="md-header__button md-logo" aria-label="Bodo Developer Documentation" data-md-component="logo">
      
  <img src="../assets/bodo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Bodo Developer Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Scalable File I/O
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="bodo-light" data-md-color-accent="bodo-green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="bodo-dark" data-md-color-accent="bodo-green"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      About Bodo
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../quick_start/" class="md-tabs__link">
      Quick Start
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../installation_and_setup/install/" class="md-tabs__link">
        Installation and Setup
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../bodo_parallelism/bodo_parallelism_basics/" class="md-tabs__link md-tabs__link--active">
        Programming with Bodo
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../integrating_bodo/spark/" class="md-tabs__link">
        Bodo in your Pipeline
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../api_docs/" class="md-tabs__link">
        API Docs
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../performance/performance/" class="md-tabs__link">
        Performance and Diagnostics
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../help_and_reference/eula/" class="md-tabs__link">
        Help and Reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Bodo Developer Documentation" class="md-nav__button md-logo" aria-label="Bodo Developer Documentation" data-md-component="logo">
      
  <img src="../assets/bodo-logo.png" alt="logo">

    </a>
    Bodo Developer Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        About Bodo
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quick_start/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" data-md-state="indeterminate" type="checkbox" id="__nav_3" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Installation and Setup
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation and Setup" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Installation and Setup
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/install/" class="md-nav__link">
        Installing Bodo Community Edition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/enterprise/" class="md-nav__link">
        Configuring Bodo Enterprise Edition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/ipyparallel/" class="md-nav__link">
        Interactive Bodo Cluster Setup using IPyParallel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/recommended_mpi_settings/" class="md-nav__link">
        Recommended MPI Settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/recommended_cluster_config/" class="md-nav__link">
        Recommended Cluster Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/bodo_platform/" class="md-nav__link">
        Using Bodo Cloud Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/bodo_platform_aws/" class="md-nav__link">
        Bodo Managed Cloud Platform on AWS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation_and_setup/bodo_platform_azure/" class="md-nav__link">
        Bodo Managed Cloud Platform on Azure
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Programming with Bodo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Programming with Bodo" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Programming with Bodo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" data-md-state="indeterminate" type="checkbox" id="__nav_4_1" checked>
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1">
          Understanding Parallelism with Bodo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Understanding Parallelism with Bodo" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Understanding Parallelism with Bodo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bodo_parallelism/bodo_parallelism_basics/" class="md-nav__link">
        Basics of Bodo Parallelism
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bodo_parallelism/advanced/" class="md-nav__link">
        Advanced Parallelism Topics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bodo_parallelism/compile_time_constants/" class="md-nav__link">
        Compile Time Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bodo_parallelism/not_supported/" class="md-nav__link">
        Unsupported Programs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Scalable File I/O
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Scalable File I/O
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Scalable File I/O">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Scalable File I/O
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#supported-formats" class="md-nav__link">
    Supported formats
  </a>
  
    <nav class="md-nav" aria-label="Supported formats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parquet-section" class="md-nav__link">
    Parquet
  </a>
  
    <nav class="md-nav" aria-label="Parquet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filter-pushdown" class="md-nav__link">
    Filter pushdown
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exploring-large-data-without-full-read" class="md-nav__link">
    Exploring Large Data Without Full Read
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csv-section" class="md-nav__link">
    CSV
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json-section" class="md-nav__link">
    JSON
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sql-section" class="md-nav__link">
    SQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deltalake-section" class="md-nav__link">
    Delta Lake
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#numpy-binary-section" class="md-nav__link">
    Numpy binaries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hdf5" class="md-nav__link">
    HDF5
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-constant-filepaths" class="md-nav__link">
    Filepaths determined at runtime
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#File" class="md-nav__link">
    File Systems
  </a>
  
    <nav class="md-nav" aria-label="File Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#S3" class="md-nav__link">
    Amazon S3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#GCS" class="md-nav__link">
    Google Cloud Storage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#HDFS" class="md-nav__link">
    Hadoop Distributed File System (HDFS) and Azure Data Lake Storage (ADLS) Gen2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#db" class="md-nav__link">
    Databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snowflake-section" class="md-nav__link">
    Snowflake
  </a>
  
    <nav class="md-nav" aria-label="Snowflake">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../objmode/" class="md-nav__link">
        Using Regular Python inside Bodo (Object Mode)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" data-md-state="indeterminate" type="checkbox" id="__nav_5" checked>
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          Bodo in your Pipeline
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Bodo in your Pipeline" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Bodo in your Pipeline
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" data-md-state="indeterminate" type="checkbox" id="__nav_5_1" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_1">
          Migration from Spark
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Migration from Spark" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Migration from Spark
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrating_bodo/spark/" class="md-nav__link">
        Spark Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrating_bodo/sparkcheatsheet/" class="md-nav__link">
        Bodo Spark Cheatsheet
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrating_bodo/dl/" class="md-nav__link">
        Deep Learning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrating_bodo/data_visualization/" class="md-nav__link">
        Data Visualization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integrating_bodo/front_end/" class="md-nav__link">
        Front End Tools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" data-md-state="indeterminate" type="checkbox" id="__nav_6" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../api_docs/">API Docs</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="API Docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          API Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/bodo_parallel_apis/" class="md-nav__link">
        Bodo Parallel APIs
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" data-md-state="indeterminate" type="checkbox" id="__nav_6_3" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../api_docs/pandas/">Pandas</a>
          
            <label for="__nav_6_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Pandas" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Pandas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/datatypes/" class="md-nav__link">
        Datatypes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/general/" class="md-nav__link">
        General Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/dataframe/" class="md-nav__link">
        Dataframe
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/groupby/" class="md-nav__link">
        Groupby
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/series/" class="md-nav__link">
        Series
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/window/" class="md-nav__link">
        Window
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/dateoffsets/" class="md-nav__link">
        DateOffsets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/io/" class="md-nav__link">
        Input/Output
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/indexapi/" class="md-nav__link">
        Index Objects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/timedelta/" class="md-nav__link">
        TimeDelta
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/timestamp/" class="md-nav__link">
        Timestamp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/na_issues/" class="md-nav__link">
        Integer NA Issue in Pandas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/pandas/type_inf_obj_data/" class="md-nav__link">
        Type Inference for Object Data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/numpy/" class="md-nav__link">
        Numpy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/udfs/" class="md-nav__link">
        User Defined Functions (UDFs)
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_6" data-md-state="indeterminate" type="checkbox" id="__nav_6_6" checked>
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../api_docs/ml/">Machine Learning</a>
          
            <label for="__nav_6_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Machine Learning" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_6">
          <span class="md-nav__icon md-icon"></span>
          Machine Learning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_6_2" data-md-state="indeterminate" type="checkbox" id="__nav_6_6_2" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../api_docs/ml/sklearn/">Scikit Learn</a>
          
            <label for="__nav_6_6_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Scikit Learn" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_6_2">
          <span class="md-nav__icon md-icon"></span>
          Scikit Learn
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/cluster/" class="md-nav__link">
        sklearn.cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/ensemble/" class="md-nav__link">
        sklearn.ensemble
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/feature_extraction/" class="md-nav__link">
        sklearn.feature_extraction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/linear_model/" class="md-nav__link">
        sklearn.linear_model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/metrics/" class="md-nav__link">
        sklearn.metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/model_selection/" class="md-nav__link">
        sklearn.model_selection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/naive_bayes/" class="md-nav__link">
        sklearn.naive_bayes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/preprocessing/" class="md-nav__link">
        sklearn.preprocessing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/ml/sklearn/svm/" class="md-nav__link">
        sklearn.svm
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/miscellaneous/" class="md-nav__link">
        Miscellaneous Supported Python API
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" data-md-state="indeterminate" type="checkbox" id="__nav_7" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          Performance and Diagnostics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Performance and Diagnostics" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Performance and Diagnostics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../performance/performance/" class="md-nav__link">
        Measuring Performance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../performance/caching/" class="md-nav__link">
        Caching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../performance/inlining/" class="md-nav__link">
        Inlining
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diagnostics_and_troubleshooting/Bodoerrors/" class="md-nav__link">
        Bodo Errors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diagnostics_and_troubleshooting/compilation/" class="md-nav__link">
        Compilation Tips
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diagnostics_and_troubleshooting/troubleaws/" class="md-nav__link">
        Troubleshooting on AWS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diagnostics_and_troubleshooting/troubleazure/" class="md-nav__link">
        Troubleshooting on Azure
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" data-md-state="indeterminate" type="checkbox" id="__nav_8" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8">
          Help and Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Help and Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Help and Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../help_and_reference/eula/" class="md-nav__link">
        End User License Agreement
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../help_and_reference/releases/" class="md-nav__link">
        Release Notes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Scalable File I/O">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Scalable File I/O
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#supported-formats" class="md-nav__link">
    Supported formats
  </a>
  
    <nav class="md-nav" aria-label="Supported formats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parquet-section" class="md-nav__link">
    Parquet
  </a>
  
    <nav class="md-nav" aria-label="Parquet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filter-pushdown" class="md-nav__link">
    Filter pushdown
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exploring-large-data-without-full-read" class="md-nav__link">
    Exploring Large Data Without Full Read
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csv-section" class="md-nav__link">
    CSV
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json-section" class="md-nav__link">
    JSON
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sql-section" class="md-nav__link">
    SQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deltalake-section" class="md-nav__link">
    Delta Lake
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#numpy-binary-section" class="md-nav__link">
    Numpy binaries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hdf5" class="md-nav__link">
    HDF5
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-constant-filepaths" class="md-nav__link">
    Filepaths determined at runtime
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#File" class="md-nav__link">
    File Systems
  </a>
  
    <nav class="md-nav" aria-label="File Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#S3" class="md-nav__link">
    Amazon S3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#GCS" class="md-nav__link">
    Google Cloud Storage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#HDFS" class="md-nav__link">
    Hadoop Distributed File System (HDFS) and Azure Data Lake Storage (ADLS) Gen2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#db" class="md-nav__link">
    Databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snowflake-section" class="md-nav__link">
    Snowflake
  </a>
  
    <nav class="md-nav" aria-label="Snowflake">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="file_io">Scalable Data I/O<a class="headerlink" href="#file_io" title="Permanent link">&para;</a></h1>
<p>Efficient parallel data processing requires data I/O to be parallelized
effectively as well. Bodo provides parallel file I/O for many different
formats such as <a href="http://parquet.apache.org">Parquet</a>, CSV, JSON, Numpy
binaries, <a href="http://www.h5py.org">HDF5</a> and SQL databases. This diagram
demonstrates how chunks of data are partitioned among parallel execution
engines by Bodo.</p>
<p><br>
<img alt="Bodo reads dataset chunks in parallel" src="../img/file-read.svg#center" />
<br></p>
<p>Bodo automatically parallelizes I/O for any number of cores and cluster
size without any additional API layers.</p>
<h2 id="supported-formats">Supported formats<a class="headerlink" href="#supported-formats" title="Permanent link">&para;</a></h2>
<p>Currently, Bodo supports I/O for <a href="http://parquet.apache.org/">Parquet</a>,
CSV, SQL, JSON, <a href="http://www.h5py.org/">HDF5</a>, and Numpy binaries
formats. It can read these formats from multiple filesystems, including
S3, HDFS and Azure Data Lake (ADLS) (see <a href="#file-systems">File Systems</a>
below for more information).</p>
<p>Also see <a href="../api_docs/pandas/#pandas">supported pandas Operations</a> for supported arguments of I/O functions.</p>
<h3 id="parquet-section">Parquet<a class="headerlink" href="#parquet-section" title="Permanent link">&para;</a></h3>
<p>Parquet is a commonly used file format in analytics due to its efficient
columnar storage. Bodo supports the standard pandas API for reading
Parquet: <code>pd.read_parquet(path)</code>, where path can be a parquet file or a
directory with multiple parquet files (all are part of the same
dataframe):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="k">def</span> <span class="nf">write_pq</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s1">&#39;example.pq&#39;</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="k">def</span> <span class="nf">read_pq</span><span class="p">():</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s1">&#39;example.pq&#39;</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>    <span class="k">return</span> <span class="n">df</span>
</code></pre></div>
<p><code>to_parquet(name)</code> with distributed data writes to a folder called
<code>name</code>. Each process writes one file into the folder, but if the data is
not distributed, <code>to_parquet(name)</code> writes to a single file called
<code>name</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="k">def</span> <span class="nf">example1_pq</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s1">&#39;example1.pq&#39;</span><span class="p">)</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;df&#39;</span><span class="p">})</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="k">def</span> <span class="nf">example2_pq</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s1">&#39;example2.pq&#39;</span><span class="p">)</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>    <span class="n">example1_pq</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="n">example2_pq</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<p>Run the code above with 4 processors:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a>mpiexec -n <span class="m">4</span> python example_pq.py
</code></pre></div>
<p><code>example1_pq(df)</code> writes 1 single file, and <code>example2_pq(df)</code> writes a
folder containing 4 parquet files:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="go">.</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="go">├── example1.pq</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="go">├── example2.pq</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="go">│   ├── part-00.parquet</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="go">│   ├── part-01.parquet</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="go">│   ├── part-02.parquet</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="go">│   └── part-03.parquet</span>
</code></pre></div>
<p>See <a href="../api_docs/pandas/io/#pandas-f-in"><code>read_parquet()</code></a>, <a href="../api_docs/pandas/series/#serialization-io-conversion"><code>to_parquet()</code></a> for supported arguments.</p>
<h4 id="filter-pushdown">Filter pushdown<a class="headerlink" href="#filter-pushdown" title="Permanent link">&para;</a></h4>
<p><strong><em>Filter Pushdown</em></strong></p>
<p>Bodo can detect filters used by the code and optimize the <code>read_parquet</code>
call by pushing the filters down to the storage layer, so that only the
rows required by the program are read. This can significantly speed up
I/O in many cases and will reduce the program's memory footprint,
sometimes substantially.</p>
<p>For example, suppose we have a large dataset that spans many years and
we only need to read data for a particular year. With pandas, we might
perform a query on the year 2021 like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="k">def</span> <span class="nf">query</span><span class="p">():</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;s3://my-bucket/data.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2021</span><span class="p">)]</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>    <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;customer_key&quot;</span><span class="p">)[</span><span class="s2">&quot;revenue&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</code></pre></div>
<p>When compiling the above, Bodo detects the <code>df[(df["year"] == 2021)]</code>
filter and optimizes the <code>read_parquet</code> call so that it only reads data
for year 2021 from S3. Because the data will have already been filtered
after reading, Bodo removes the filter operation during compilation.
Note that this requires code transformation and optimization and is
something that pandas cannot do. Bodo automatically infers which filters
can be pushed down.</p>
<p>If your dataset is <em>hive-partitioned</em> and partition columns appear in
filter expressions, only the files that contain relevant data are read,
and the rest are discarded based on their path. For example, if <code>year</code>
is a partition column above and we have a dataset:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="go">.</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="go">└── data.pq/</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="go">    │   ...</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="go">    ├───year=2020/</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="go">    │   ├── part-00.parquet</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="go">    │   └── part-01.parquet</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="go">    └───year=2021/</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="go">        ├── part-02.parquet</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="go">        └── part-03.parquet</span>
</code></pre></div>
<p>Bodo will only read the files in the <code>year=2021</code> directory.</p>
<p>For non-partition columns, Bodo may discard files entirely just by
looking at their parquet metadata (depending on the filters and
statistics contained in the metadata) or filter the rows during read.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Filter pushdown can be a very significant optimization. 
Please refer to the <a href="../performance/inlining/#inlining">inlining</a> section to make
sure these optimizations are applied in your program.</p>
</div>
<h4 id="exploring-large-data-without-full-read">Exploring Large Data Without Full Read<a class="headerlink" href="#exploring-large-data-without-full-read" title="Permanent link">&para;</a></h4>
<p><strong><em>Exploring Large Data Without Full Read</em></strong></p>
<p>Exploring large datasets often requires seeing its shape and a sample of
the data. Bodo is able to provide this information quickly without
loading the full Parquet dataset, which means there is no need for a
large cluster with a lot of memory. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="k">def</span> <span class="nf">head_only_read</span><span class="p">():</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;example.pq&quot;</span><span class="p">)</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</code></pre></div>
<p>In this example, Bodo provides the shape information for the full
dataset in <code>df.shape</code>, but only loads the first few rows that are
necessary for <code>df.head()</code>.</p>
<h3 id="csv-section">CSV<a class="headerlink" href="#csv-section" title="Permanent link">&para;</a></h3>
<p>CSV is a common text format for data exchange. Bodo supports most of the
standard pandas API to read CSV files:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="k">def</span> <span class="nf">write_csv</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;example.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="k">def</span> <span class="nf">read_csv</span><span class="p">():</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;example.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a>    <span class="k">return</span> <span class="n">df</span>
</code></pre></div>
<p>Unlike <code>read_csv</code> in regular pandas, Bodo can read a directory that
contains multiple partitioned CSV files as well. All files in the folder
must have the same number and datatype of columns. They can have
different number of rows.</p>
<p>Usage:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="k">def</span> <span class="nf">read_csv_folder</span><span class="p">():</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;/path/to/folder/foldername&quot;</span><span class="p">)</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a>    <span class="n">doSomething</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<p>Use <code>sep="n"</code> to read text files line by line into a single-column
dataframe (without creating separate columns, useful when text data is
unstructured or there are too many columns to read efficiently):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="k">def</span> <span class="nf">read_test</span><span class="p">():</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;example.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;str&quot;</span><span class="p">})</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a>    <span class="k">return</span> <span class="n">df</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Bodo uses nullable integer types of pandas to ensure type stability (see
<a href="../api_docs/pandas/na_issues/#integer-na-issue-pandas">integer NA issue in pandas</a> for more details). Therefore, data types must be specified
explicitly for accurate performance comparisons of Bodo and pandas for
<code>read_csv</code>.</p>
</div>
<p><code>to_csv(name)</code> has different behaviors for different file systems:</p>
<ol>
<li>
<p>POSIX file systems: always writes to a single file, regardless of the number of processes and whether the data is 
    distributed, but writing is still done in parallel when more than 1 processor is used:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">)})</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="k">def</span> <span class="nf">example1_csv</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;example1.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;df&#39;</span><span class="p">})</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="k">def</span> <span class="nf">example2_csv</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;example2.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a>    <span class="n">example1_csv</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="n">example2_csv</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<p>Run the code above with 4 processors:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a>mpiexec -n <span class="m">4</span> python example_csv.py
</code></pre></div>
<p>each <code>example1_csv(df)</code> and <code>example2_csv(df)</code> writes to a single file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="go">.</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="go">├── example1.csv</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="go">├── example2.csv</span>
</code></pre></div>
</li>
<li>
<p><a href="#S3">S3</a> and <a href="#HDFS">HDFS</a>: distributed data is written to a folder called <code>name</code>.
    Each process writes one file into the folder, but if the data is not distributed,
    <code>to_csv(name)</code> writes to a single file called <code>name</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">)})</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="k">def</span> <span class="nf">example1_csv</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;s3://bucket-name/example1.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;df&#39;</span><span class="p">})</span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="k">def</span> <span class="nf">example2_csv</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;s3://bucket-name/example2.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a>    <span class="n">example1_csv</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="n">example2_csv</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<p>Run the code above with 4 processors:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a>mpiexec -n <span class="m">4</span> python example_csv.py
</code></pre></div>
<p><code>example1_csv(df)</code> writes 1 single file, and <code>example2_csv(df)</code> writes a folder containing 4 csv files:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="go">.</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="go">├── example1.csv</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="go">├── example2.csv</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="go">│   ├── part-00.csv</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="go">│   ├── part-01.csv</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="go">│   ├── part-02.csv</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="go">│   └── part-03.csv</span>
</code></pre></div>
</li>
</ol>
<p>See <a href="../api_docs/pandas/io/#pandas-f-in"><code>read_csv()</code></a>, <a href="../api_docs/pandas/series/#serialization-io-conversion"><code>to_csv()</code></a> for supported arguments.</p>
<h3 id="json-section">JSON<a class="headerlink" href="#json-section" title="Permanent link">&para;</a></h3>
<p>For JSON, the syntax is also the same as pandas. </p>
<p>Usage:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="k">def</span> <span class="nf">example_write_json</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">fname</span><span class="p">):</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="k">def</span> <span class="nf">example_read_json_lines_format</span><span class="p">():</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;example.json&#39;</span><span class="p">,</span> <span class="n">orient</span> <span class="o">=</span> <span class="s1">&#39;records&#39;</span><span class="p">,</span> <span class="n">lines</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="k">def</span> <span class="nf">example_read_json_multi_lines</span><span class="p">():</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;example_file.json&#39;</span><span class="p">,</span> <span class="n">orient</span> <span class="o">=</span> <span class="s1">&#39;records&#39;</span><span class="p">,</span> <span class="n">lines</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a>        <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">})</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>The <code>dtype</code> argument is required when reading a regular multi-line JSON
    file.</li>
<li>Bodo cannot read a directory containing multiple multi-line JSON
    files</li>
</ul>
</div>
<p><code>to_json(name)</code> has different behaviors for different file systems:</p>
<ol>
<li>
<p>POSIX file systems: <code>to_json(name)</code> behavior depends on <code>orient</code> and <code>lines</code> arguments.</p>
<ol>
<li>
<p><code>DataFrame.to_json(name, orient='records', lines=True)</code>
    (i.e. writing <a href="http://jsonlines.org/" target="blank">JSON Lines text file format</a>) always writes to a single file,
    regardless of the number of processes and whether the data is distributed,
    but writing is still done in parallel when more than 1 processor is used:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">)})</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="k">def</span> <span class="nf">example1_json</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">&#39;example1.json&#39;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">,</span> <span class="n">lines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;df&#39;</span><span class="p">})</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="k">def</span> <span class="nf">example2_json</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">&#39;example2.json&#39;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">,</span> <span class="n">lines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a>    <span class="n">example1_json</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="n">example2_jsons</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<p>Run the code above with 4 processors:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a>mpiexec -n <span class="m">4</span> python example_json.py
</code></pre></div>
<p>each <code>example1_json(df)</code> and <code>example2_json(df)</code> writes to a single file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="go">.</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="go">├── example1.json</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="go">├── example2.json</span>
</code></pre></div>
</li>
<li>
<p>All other combinations of values for <code>orient</code> and <code>lines</code> have the same behavior as <a href="#S3">S3</a> and
<a href="#HDFS">HDFS</a> explained below.</p>
</li>
</ol>
</li>
<li>
<p><a href="#S3">S3</a> and <a href="#HDFS">HDFS</a> : distributed data is written to a folder called <code>name</code>.
    Each process writes one file into the folder, but if the data is not distributed,
    <code>to_json(name)</code> writes to a file called <code>name</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">)})</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="k">def</span> <span class="nf">example1_json</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">&#39;s3://bucket-name/example1.json&#39;</span><span class="p">)</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;df&#39;</span><span class="p">})</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="k">def</span> <span class="nf">example2_json</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">&#39;s3://bucket-name/example2.json&#39;</span><span class="p">)</span>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a>
<a id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="k">if</span> <span class="n">bodo</span><span class="o">.</span><span class="n">get_rank</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-20-12" name="__codelineno-20-12"></a>    <span class="n">example1_json</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="n">example2_json</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<p>Run the code above with 4 processors:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a>mpiexec -n <span class="m">4</span> python example_json.py
</code></pre></div>
<p><code>example1_json(df)</code> writes 1 single file, and <code>example2_json(df)</code> writes a folder containing 4 json files:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="go">.</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="go">├── example1.json</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="go">├── example2.json</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="go">│   ├── part-00.json</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="go">│   ├── part-01.json</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="go">│   ├── part-02.json</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="go">│   └── part-03.json</span>
</code></pre></div>
<p>See <a href="../api_docs/pandas/series/#serialization-io-conversion"><code>read_json()][pandas-f-in], [</code>to_json()`</a> for supported arguments.</p>
</li>
</ol>
<h3 id="sql-section">SQL<a class="headerlink" href="#sql-section" title="Permanent link">&para;</a></h3>
<p>For SQL, the syntax is also the same as pandas. For reading:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="k">def</span> <span class="nf">example_read_sql</span><span class="p">():</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s1">&#39;select * from employees&#39;</span><span class="p">,</span> <span class="s1">&#39;mysql+pymysql://admin:server&#39;</span><span class="p">)</span>
</code></pre></div>
<p>See <a href="../api_docs/pandas/io/#pandas-f-in"><code>read_sql()</code></a> for supported arguments.</p>
<p>For writing:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="k">def</span> <span class="nf">example_write_sql</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a>    <span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;mysql+pymysql://admin:server&#39;</span><span class="p">)</span>
</code></pre></div>
<p>See <a href="../api_docs/pandas/io/#pandas-f-in"><code>to_sql()</code></a> for supported arguments.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>sqlalchemy</code> must be installed in order to use <code>pandas.read_sql</code>.</p>
</div>
<h3 id="deltalake-section">Delta Lake<a class="headerlink" href="#deltalake-section" title="Permanent link">&para;</a></h3>
<p>Reading parquet files from Delta Lake is supported locally, from S3, and from Azure ADLS.</p>
<ul>
<li>The Delta Lake binding python packaged needs to be installed using pip:<code>pip install deltalake</code>.</li>
<li>For S3, the <code>AWS_DEFAULT_REGION</code> environment variable should be set to the region of the bucket hosting 
    the Delta Lake table.</li>
<li>For ADLS, the <code>AZURE_STORAGE_ACCOUNT</code> and <code>AZURE_STORAGE_KEY</code> environment variables need to be set.</li>
</ul>
<p>Example code for reading:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="k">def</span> <span class="nf">example_read_deltalake</span><span class="p">():</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s1">&#39;path/to/deltalake&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Writing is currently not supported.</p>
</div>
<h3 id="numpy-binary-section">Numpy binaries<a class="headerlink" href="#numpy-binary-section" title="Permanent link">&para;</a></h3>
<p>Numpy's <code>fromfile</code> and <code>tofile</code> are supported as below:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="k">def</span> <span class="nf">example_np_io</span><span class="p">():</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a>    <span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="s2">&quot;myfile.dat&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a>    <span class="o">...</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a>    <span class="n">A</span><span class="o">.</span><span class="n">tofile</span><span class="p">(</span><span class="s2">&quot;newfile.dat&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Bodo has the same behavior as Numpy for <code>numpy.ndarray.tofile()</code>, where
we always write to a single file. However, writing distributed data to
POSIX is done in parallel, but writing to S3 &amp; HDFS is done sequentially
(due to file system limitations).</p>
<h3 id="hdf5">HDF5<a class="headerlink" href="#hdf5" title="Permanent link">&para;</a></h3>
<p>HDF5 is a common format in scientific computing, especially for
multi-dimensional numerical data. HDF5 can be very efficient at scale,
since it has native parallel I/O support. For HDF5, the syntax is the
same as the <a href="http://www.h5py.org/">h5py</a> package. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="k">def</span> <span class="nf">example_h5</span><span class="p">():</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a>    <span class="n">f</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s2">&quot;data.hdf5&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a>    <span class="n">X</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">][:]</span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a>    <span class="n">Y</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;responses&#39;</span><span class="p">][:]</span>
</code></pre></div>
<h2 id="non-constant-filepaths">Filepaths determined at runtime<a class="headerlink" href="#non-constant-filepaths" title="Permanent link">&para;</a></h2>
<p>When reading from a file, Bodo needs to know the types of the resulting
dataframe. If the file name is a constant string or function argument,
Bodo can look at the file at compile time and infer the types. If the
the filepath is not constant, this information must be supplied by the
user. For <code>pd.read_csv</code> and <code>pd.read_excel</code>, this information can be supplied
through the <code>names</code> and <code>dtypes</code> keyword arguments:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="k">def</span> <span class="nf">example_csv</span><span class="p">(</span><span class="n">fname1</span><span class="p">,</span> <span class="n">fname2</span><span class="p">,</span> <span class="n">flag</span><span class="p">)):</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a>    <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname1</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname2</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a>    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">})</span>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="k">def</span> <span class="nf">example_excel</span><span class="p">(</span><span class="n">fname1</span><span class="p">,</span> <span class="n">fname2</span><span class="p">,</span> <span class="n">flag</span><span class="p">)):</span>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a>    <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a>            <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname1</span>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname2</span>
<a id="__codelineno-28-15" name="__codelineno-28-15"></a>    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span>
<a id="__codelineno-28-16" name="__codelineno-28-16"></a>        <span class="n">file_name</span><span class="p">,</span>
<a id="__codelineno-28-17" name="__codelineno-28-17"></a>        <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">],</span>
<a id="__codelineno-28-18" name="__codelineno-28-18"></a>        <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">bool_</span><span class="p">},</span>
<a id="__codelineno-28-19" name="__codelineno-28-19"></a>    <span class="p">)</span>
</code></pre></div>
<p>For the remaining pandas read functions, the existing APIs do not
currently allow this information to be supplied. Users can still provide
this information by adding type information in the <code>bodo.jit</code> decorator,
similar to <a href="http://numba.pydata.org/numba-doc/latest/reference/types.html" target="blank">Numba's typing syntax</a>.
For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="nb">locals</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;df&#39;</span><span class="p">:{</span><span class="s1">&#39;one&#39;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">float64</span><span class="p">[:],</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a>                  <span class="s1">&#39;two&#39;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">string_array_type</span><span class="p">,</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a>                  <span class="s1">&#39;three&#39;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">bool_</span><span class="p">[:],</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a>                  <span class="s1">&#39;four&#39;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">float64</span><span class="p">[:],</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a>                  <span class="s1">&#39;five&#39;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">string_array_type</span><span class="p">,</span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a>                  <span class="p">}})</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="k">def</span> <span class="nf">example_df_schema</span><span class="p">(</span><span class="n">fname1</span><span class="p">,</span> <span class="n">fname2</span><span class="p">,</span> <span class="n">flag</span><span class="p">):</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a>    <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname1</span>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-29-11" name="__codelineno-29-11"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname2</span>
<a id="__codelineno-29-12" name="__codelineno-29-12"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
<a id="__codelineno-29-13" name="__codelineno-29-13"></a>    <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-29-14" name="__codelineno-29-14"></a>
<a id="__codelineno-29-15" name="__codelineno-29-15"></a>
<a id="__codelineno-29-16" name="__codelineno-29-16"></a> <span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="nb">locals</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;X&#39;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">float64</span><span class="p">[:,:],</span> <span class="s1">&#39;Y&#39;</span><span class="p">:</span> <span class="n">bodo</span><span class="o">.</span><span class="n">float64</span><span class="p">[:]})</span>
<a id="__codelineno-29-17" name="__codelineno-29-17"></a> <span class="k">def</span> <span class="nf">example_h5</span><span class="p">(</span><span class="n">fname1</span><span class="p">,</span> <span class="n">fname2</span><span class="p">,</span> <span class="n">flag</span><span class="p">):</span>
<a id="__codelineno-29-18" name="__codelineno-29-18"></a>    <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
<a id="__codelineno-29-19" name="__codelineno-29-19"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname1</span>
<a id="__codelineno-29-20" name="__codelineno-29-20"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-29-21" name="__codelineno-29-21"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">fname2</span>
<a id="__codelineno-29-22" name="__codelineno-29-22"></a>     <span class="n">f</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<a id="__codelineno-29-23" name="__codelineno-29-23"></a>     <span class="n">X</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">][:]</span>
<a id="__codelineno-29-24" name="__codelineno-29-24"></a>     <span class="n">Y</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;responses&#39;</span><span class="p">][:]</span>
</code></pre></div>
<p>For the complete list of supported types, please see the <a href="../api_docs/pandas/datatypes/#pandas-dtype">pandas dtype section</a>. 
In the event that the dtypes are improperly specified, Bodo will throw a runtime error.</p>
<h2 Systems="Systems" id="File">File Systems<a class="headerlink" href="#File" title="Permanent link">&para;</a></h2>
<h3 id="S3">Amazon S3<a class="headerlink" href="#S3" title="Permanent link">&para;</a></h3>
<p>Reading and writing <a href="#csv-section">CSV</a>, <a href="#parquet-section">Parquet</a>, <a href="#json-section">JSON</a>, and
<a href="#numpy-binary-section">Numpy binary</a> files from and to Amazon S3 is supported.</p>
<p>The <code>fsspec</code> package must be available, and the file path should start
with <code>s3://</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="k">def</span> <span class="nf">example_s3_parquet</span><span class="p">():</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s1">&#39;s3://bucket-name/file_name.parquet&#39;</span><span class="p">)</span>
</code></pre></div>
<p>These environment variables are used for File I/O with S3 credentials:</p>
<ul>
<li><code>AWS_ACCESS_KEY_ID</code></li>
<li><code>AWS_SECRET_ACCESS_KEY</code></li>
<li><code>AWS_DEFAULT_REGION</code>: default as <code>us-east-1</code></li>
<li><code>AWS_S3_ENDPOINT</code>: specify custom host name, default as AWS endpoint(<code>s3.amazonaws.com</code>)</li>
</ul>
<p>Connecting to S3 endpoints through a proxy is supported. The proxy URI can be provided by setting one of the following
environment variables (listed in order of precedence):</p>
<ul>
<li><code>http_proxy</code></li>
<li><code>https_proxy</code></li>
<li><code>HTTP_PROXY</code></li>
<li><code>HTTPS_PROXY</code></li>
</ul>
<p>Bodo uses <a href="https://arrow.apache.org/">Apache Arrow</a> internally for read
and write of data on S3.</p>
<h3 id="GCS">Google Cloud Storage<a class="headerlink" href="#GCS" title="Permanent link">&para;</a></h3>
<p>Reading and writing <a href="#parquet-section">Parquet</a> files from and to Google Cloud is supported.</p>
<p>The file path should start with <code>gs://</code> or <code>gcs://</code>:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="k">def</span> <span class="nf">example_gcs_parquet</span><span class="p">():</span>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s1">&#39;gcs://bucket-name/file_name.parquet&#39;</span><span class="p">)</span>
</code></pre></div>
These environment variables are used for File I/O with GCS credentials:</p>
<ul>
<li><code>GOOGLE_APPLICATION_CREDENTIALS</code></li>
</ul>
<p>Details for <code>GOOGLE_APPLICATION_CREDENTIALS</code> can be seen in the Google
docs <a href="https://cloud.google.com/docs/authentication/getting-started#setting_the_environment_variable" target="blank">here</a>.</p>
<p>Bodo uses the fsspec-based <a href="https://gcsfs.readthedocs.io/en/latest/" target="blank">gcsfs</a> library internally for
read and write of data on GCS.</p>
<h3 id="HDFS">Hadoop Distributed File System (HDFS) and Azure Data Lake Storage (ADLS) Gen2<a class="headerlink" href="#HDFS" title="Permanent link">&para;</a></h3>
<p>Reading and writing <a href="#csv-section">CSV</a>, <a href="#parquet-section">Parquet</a>, <a href="#json-section">JSON</a>, and
<a href="#numpy-binary-section">Numpy binary</a> files from and to Hadoop Distributed File System (HDFS) is supported.
Note that Azure Data Lake Storage Gen2 can be accessed through HDFS.</p>
<p>The <code>openjdk</code> version 8 package must be available, and the file path
should start with <code>hdfs://</code> or <code>abfs[s]://</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="k">def</span> <span class="nf">example_hdfs_parquet</span><span class="p">():</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s1">&#39;hdfs://host:port/dir/file_name.pq&#39;</span><span class="p">)</span>
</code></pre></div>
<p>These environment variables are used for File I/O with HDFS:</p>
<ul>
<li><code>HADOOP_HOME</code>: the root of your installed Hadoop distribution. Often is <code>lib/native/libhdfs.so</code>.</li>
<li><code>ARROW_LIBHDFS_DIR</code>: location of libhdfs. Often is <code>$HADOOP_HOME/lib/native</code>.</li>
<li><code>CLASSPATH</code>: must contain the Hadoop jars. You can set these using:
    <div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="nb">export</span> <span class="nv">CLASSPATH</span><span class="o">=</span><span class="sb">`</span><span class="nv">$HADOOP_HOME</span>/bin/hdfs classpath --glob<span class="sb">`</span>
</code></pre></div></li>
</ul>
<p>Bodo uses <a href="https://arrow.apache.org/">Apache Arrow</a> internally for read
and write of data on HDFS. <code>$HADOOP_HOME/etc/hadoop/hdfs-site.xml</code>
provides default behaviors for the HDFS client used by Bodo.
Inconsistent configurations (e.g. <code>dfs.replication</code>) could potentially
cause errors in Bodo programs.</p>
<h2 id="db">Databases<a class="headerlink" href="#db" title="Permanent link">&para;</a></h2>
<p>Currently, Bodo supports most RDBMS that work with SQLAlchemy, with a
corresponding driver.</p>
<h2 id="snowflake-section">Snowflake<a class="headerlink" href="#snowflake-section" title="Permanent link">&para;</a></h2>
<p>To read a dataframe from a Snowflake database, users can use
<code>pd.read_sql</code> with their Snowflake username and password:
<code>pd.read_sql(query,snowflake://&lt;username&gt;:&lt;password&gt;@url)</code>.</p>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<p>In order to be able to query Snowflake from Bodo, you will have to
install the Snowflake connector. If you're using Bodo in a conda
environment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a>conda install -c conda-forge snowflake-connector-python
</code></pre></div>
<p>If you've installed Bodo using pip, then you can install the Snowflake
connector using pip as well:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a>pip install snowflake-connector-python
</code></pre></div>
<h3 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h3>
<p>Bodo requires the Snowflake connection string to be passed as an
argument to the <code>pd.read_sql</code> function. The complete code looks as
follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="kn">import</span> <span class="nn">bodo</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="nd">@bodo</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">distributed</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;df&quot;</span><span class="p">])</span>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="k">def</span> <span class="nf">read_snowflake</span><span class="p">(</span><span class="n">db_name</span><span class="p">,</span> <span class="n">table_name</span><span class="p">):</span>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>
<a id="__codelineno-36-7" name="__codelineno-36-7"></a>            <span class="sa">f</span><span class="s2">&quot;SELECT * FROM </span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-36-8" name="__codelineno-36-8"></a>            <span class="sa">f</span><span class="s2">&quot;snowflake://user:password@url/</span><span class="si">{</span><span class="n">db_name</span><span class="si">}</span><span class="s2">/schema?warehouse=warehouse_name&quot;</span><span class="p">,</span>
<a id="__codelineno-36-9" name="__codelineno-36-9"></a>        <span class="p">)</span>
<a id="__codelineno-36-10" name="__codelineno-36-10"></a>    <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="n">df</span> <span class="o">=</span> <span class="n">read_snowflake</span><span class="p">(</span><span class="n">db_name</span><span class="p">,</span> <span class="n">temp_table_name</span><span class="p">)</span>
</code></pre></div>
<p>We can use the <code>pd.to_sql</code> method to persist a dataframe to a Snowflake
table:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;&lt;table_name&gt;&#39;</span><span class="p">,</span><span class="sa">f</span><span class="s2">&quot;snowflake://&lt;username&gt;:&lt;password&gt;@url/&lt;db_name&gt;/public?warehouse=XL_WH&quot;</span><span class="p">,</span><span class="n">schema</span><span class="o">=</span><span class="s2">&quot;&lt;schema&gt;&quot;</span><span class="p">,</span><span class="n">if_exists</span><span class="o">=</span><span class="s2">&quot;append&quot;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><code>index=False</code> is required as Snowflake does not support indexes. </li>
<li><code>if_exists=append</code> is needed if the table already exists in snowflake.</li>
</ul>
</div>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../bodo_parallelism/not_supported/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Unsupported Programs" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Unsupported Programs
            </div>
          </div>
        </a>
      
      
        
        <a href="../objmode/" class="md-footer__link md-footer__link--next" aria-label="Next: Using Regular Python inside Bodo (Object Mode)" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Using Regular Python inside Bodo (Object Mode)
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019 - 2022 Bodo, Inc.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/Bodo-Inc/Feedback" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/bodo_ai" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.linkedin.com/company/19205698" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "navigation.indexes", "navigation.expand", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.bd0b6b67.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8aa65030.min.js"></script>
      
    
  </body>
</html>